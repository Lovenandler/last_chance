{"version":3,"sources":["connection/webRTC/webRTCHandler.js","connection/webRTC/GroupCallHandler.js","connection/socketConnection/socketConnection.js","storage/actions/mainPageActions.js","storage/adapter/mainPageAdapter.js","storage/actions/callActions.js","storage/adapter/callAdapter.js","storage/adapter.js","storage/storage.js","mainPage/components/Todo/firebase.js","mainPage/components/UsersList/UsersListItem.js","mainPage/components/UsersList/UsersList.js","mainPage/components/UsersList/UsersListItemClosed.js","mainPage/components/UsersList/UsersListClosed.js","mainPage/components/LocalVideoView/LocalVideoView.js","mainPage/components/RemoteVideoView/RemoteVideoView.js","mainPage/components/CallRejectedDialog/RejectedCallWindow.js","mainPage/components/IncomingCallDialog/IncomingCallDialog.js","mainPage/components/CallWindow/CallWindow.js","mainPage/components/ConversationButtons/ControlButton.js","mainPage/components/ConversationButtons/ControlButtons.js","mainPage/components/Messenger/MessageDisplayer.js","mainPage/components/Messenger/Messenger.js","mainPage/components/Call/Call.js","mainPage/components/Calendar/LoginSignout.jsx","mainPage/components/CallInfo/CallInfo.js","mainPage/components/GroupCallRoomsList/GroupCallRoomsListItem.js","mainPage/components/GroupCallRoomsList/GroupCallRoomsList.js","mainPage/components/GroupCallButton/GroupCallButton.js","mainPage/components/GroupCallRoom/GroupCallVideo.js","mainPage/components/GroupCallRoom/GroupCallRoom.js","mainPage/components/GroupCall/GroupCall.js","mainPage/components/Todo/DisplayTodo.js","mainPage/components/Todo/AddTodo.js","mainPage/components/Video/VideoPlayer.js","mainPage/components/Audio/AudioPlayer.js","mainPage/components/Pomodoro/ConfigurePage.js","mainPage/components/Pomodoro/Main.js","mainPage/components/Pomodoro/MainPage.js","mainPage/Main.js","startPage/components/StartPageInput.js","startPage/components/SubmitButton.js","startPage/StartPage.js","App.js","index.js"],"names":["connectedUserSocketId","peerConnection","dataChannel","screenSharingStream","myPeer","myPeerId","groupCallRoomId","socket","DASHBOARD_SET_USERNAME","DASHBOARD_SET_ACTIVE_USERS","DASHBOARD_SET_GROUP_CALL_ROOMS","initState","username","activeUsers","groupCallRooms","reducer","state","arguments","length","undefined","action","type","mainActions","_objectSpread","callStates","CALL_SET_LOCAL_STREAM","CALL_SET_CALL_STATE","CALL_SET_CALLING_DIALOG_VISIBLE","CALL_SET_CALLER_USERNAME","CALL_SET_CALL_REJECTED","CALL_SET_REMOTE_STREAM","CALL_SET_LOCAL_MICROPHONE_ENABLED","CALL_SET_LOCAL_CAMERA_ENABLED","CALL_SET_SCREEN_SHARING_ACTIVE","CALL_RESET_CALL_STATE","CALL_SET_GROUP_CALL_ACTIVE","CALL_SET_GROUP_CALL_STREAMS","CALL_CLEAR_GROUP_CALL_DATA","CALL_SET_CHAT_MESSAGE","setCallState","callState","setCallingDialogVisible","visible","setCallRejected","callRejectedDetails","callRejected","rejected","reason","setLocalMicrophoneEnabled","enabled","setLocalCameraEnabled","setScreenSharingActive","active","setGroupCallActive","setGroupCallIncomingStreams","groupCallStreams","setMessage","messageReceived","messageContent","message","received","content","localStream","callingDialogVisible","callerUsername","remoteStream","localCameraEnabled","localMicrophoneEnabled","screenSharingActive","groupCallActive","callActions","combineReducers","dashboard","mainAdapter","call","callAdapter","store","createStore","composeWithDevTools","preOfferAnswers","defaultConstrains","video","width","height","audio","configuration","iceServers","urls","getLocalStream","navigator","mediaDevices","getUserMedia","then","stream","dispatch","createPeerConnection","catch","err","console","log","RTCPeerConnection","_step","getState","_iterator","_createForOfIteratorHelper","getTracks","s","n","done","track","value","addTrack","e","f","ontrack","_ref","_slicedToArray","streams","ondatachannel","event","channel","onopen","onmessage","data","createDataChannel","onicecandidate","candidate","socketConnection","onconnectionstatechange","connectionState","callToOtherUser","calleeDetails","socketId","callee","caller","handlePreOffer","checkIfCallIsPossible","callerSocketId","answer","sendOffer","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","offer","wrap","_context","prev","next","createOffer","sent","setLocalDescription","calleeSocketId","stop","apply","handleOffer","_ref3","_callee2","_context2","setRemoteDescription","createAnswer","_x","handleAnswer","_ref4","_callee3","_context3","_x2","handleCandidate","_ref5","_callee4","_context4","addIceCandidate","t0","error","_x3","switchForScreenSharingStream","_ref6","_callee5","senders","_senders","_sender","_context5","getDisplayMedia","getSenders","find","sender","kind","getVideoTracks","replaceTrack","forEach","hangUp","resetCallDataAfterHangUp","close","resetCallData","getAudioTracks","groupCallHost","connectWithMyPeer","window","Peer","path","host","port","on","id","incomingStream","addVideoStream","clearGroupData","destroy","concat","_toConsumableArray","broadcastEventTypes","connectWithWebSocket","socketClient","handleBroadcastEvents","webRTCHandler","rejectionReason","peerId","webRTCGroupCallHandler","filter","streamId","registerNewUser","roomNum","emit","sendPreOffer","sendPreOfferAnswer","sendWebRTCOffer","sendWebRTCAnswer","sendWebRTCCandidate","sendUserHangedUp","registerGroupCall","userWantsToJoinGroupCall","userLeftGroupCall","groupCallClosedByHost","urlNum","location","href","split","activeUser","map","num","room","activeGroupCallRoomId","roomId","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","UsersListItem","props","_jsxs","className","onClick","children","_jsx","src","alt","connect","_useState","useState","_useState2","i","UsersListItemClosed","LocalVideoView","localVideoRef","useRef","useEffect","localVideo","current","srcObject","onloadedmetadata","play","ref","autoPlay","muted","remoteVideoRef","remoteVideo","RejectedCallWindow","hideCallRejectedDialog","setTimeout","IncomingCallDialog","CallWindow","MdCallEnd","style","fill","ControlButton","onClickHandler","ControlButtons","setCameraEnabled","setMicrophoneEnabled","groupCall","micEnabled","MdMic","MdMicOff","cameraEnabled","MdVideocam","MdVideocamOff","MdCamera","MdVideoLabel","MessageDisplayer","Messenger","setDirectCallMessage","inputValue","setInputValue","_Fragment","onChange","target","onKeyDown","keyCode","send","sendMessageUsingDataChannel","placeholder","RemoteVideoView","LoginSignout","tokenClient","googleApi","gapi","google","CLIENT_ID","API_KEY","DISCOVERY_DOC","SCOPES","accessToken","localStorage","getItem","expiresIn","initializeGoogleApiClient","_initializeGoogleApiClient","client","init","discoveryDocs","setToken","access_token","expires_in","listUpcomingEvents","_listUpcomingEvents","response","request","events","output","Date","toISOString","calendar","list","document","getElementById","innerText","abrupt","result","items","reduce","str","summary","start","dateTime","date","load","accounts","oauth2","initTokenClient","client_id","scope","callback","hidden","resp","_googleApi$client$get","getToken","setItem","requestAccessToken","prompt","token","revoke","clear","whiteSpace","CallInfo","GroupCallRoomsListItem","hostSocketId","localStreamId","hostName","GroupCallButton","label","GroupCallVideo","videoRef","remoteGroupCallVideo","GroupCallRoom","Todo","todo","toggleComplete","handleDelete","handleEdit","_React$useState","React","title","_React$useState2","newTitle","setNewTitle","textDecoration","completed","preventDefault","complete","AddTodo","setTitle","handleSubmit","addDoc","collection","onSubmit","PlayerExample","youtubeVideo","setYoutubeVideo","_useState3","_useState4","youtubeUrl","setYoutubeUrl","_useState5","_useState6","youtubeError","setYoutubeError","test","Button","ReactPlayer","url","AudioPlayer","_React$Component","_inherits","_super","_createSuper","_classCallCheck","_createClass","key","controls","Component","ConfigurePage","updateConfigure","updatePomodoro","pomodoro","setPomodoro","pomoBreak","setPomoBreak","required","maxLength","minLength","max","min","step","Main","isPlay","setIsPlay","isBreak","setIsBreak","minutes","setMinutes","_useState7","_useState8","seconds","setSeconds","_useState9","_useState10","_interval","_setInterval","_useState11","_useState12","_remainingTimeinMs","_setRemainingTimeinMs","configureTime","_session","_break","restartFunction","clearInterval","timer","_endTime","now","setInterval","remainingTimeinMs","remainingTimeinS","Math","round","_tempMinute","floor","_tempSeconds","countDownFunction","MainPage","isConfigure","setIsConfigure","name","setName","todos","setTodos","useHistory","bool","q","query","unsub","onSnapshot","querySnapshot","todosArray","doc","push","updateDoc","deleteDoc","_x4","webRTCGroupHandler","sessionStorage","showPomodoro","setShowPomodoro","showNotes","setShowNotes","_useState13","_useState14","showCalendar","setShowCalendar","_useState15","_useState16","showAudio","setShowAudio","_useState17","_useState18","showVideo","setShowVideo","_useState19","_useState20","showMenu","setShowMenu","_useState21","_useState22","showTodo","setShowTodo","_useState23","_useState24","showCall","setShowCall","_useState25","_useState26","_useState27","_useState28","position","left","top","objectFit","transform","zIndex","exitRoom","Link","to","paths","item","random","Draggable","MainPagePomodoro","_pomodoro","_pomoBreak","DisplayTodo","Call","GroupCall","GroupCallRoomsList","VideoPlayer","visibility","UsersListClosed","UsersList","UsernameInput","setUsername","setRoomNum","SubmitButton","handleSubmitButtonPressed","saveUsername","history","docRef","checkValue","a","b","alert","addEventListener","Carousel","interval","slide","Item","StartPageInput","textAlign","App","Router","Switch","Route","exact","StartPage","ReactDOM","render","StrictMode","Provider","storage"],"mappings":"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","file":"static/js/main.2b808c75.chunk.js","sourcesContent":["import store from '../../storage/storage';\r\nimport { setLocalStream, setCallState, callStates, setCallingDialogVisible, setCallerUsername, setCallRejected, setRemoteStream, setScreenSharingActive, resetCallDataState, setMessage } from '../../storage/actions/callActions';\r\nimport * as socketConnection from '../socketConnection/socketConnection';\r\n\r\nconst preOfferAnswers = {\r\n  CALL_ACCEPTED: 'CALL_ACCEPTED',\r\n  CALL_REJECTED: 'CALL_REJECTED',\r\n  CALL_NOT_AVAILABLE: 'CALL_NOT_AVAILABLE'\r\n};\r\n\r\nconst defaultConstrains = {\r\n  video: {\r\n    width: 480,\r\n    height: 360\r\n  },\r\n  audio: true\r\n};\r\n\r\nconst configuration = {\r\n  iceServers: [{\r\n    urls: 'stun:stun.l.google.com:13902'\r\n  }]\r\n};\r\n\r\nlet connectedUserSocketId;\r\nlet peerConnection;\r\nlet dataChannel;\r\n\r\nexport const getLocalStream = () => {\r\n  navigator.mediaDevices.getUserMedia(defaultConstrains)\r\n    .then(stream => {\r\n      store.dispatch(setLocalStream(stream));\r\n      store.dispatch(setCallState(callStates.CALL_AVAILABLE));\r\n      createPeerConnection();\r\n    })\r\n    .catch(err => {\r\n      console.log('error occured when trying to get an access to get local stream');\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nconst createPeerConnection = () => {\r\n  peerConnection = new RTCPeerConnection(configuration);\r\n\r\n  const localStream = store.getState().call.localStream;\r\n\r\n  for (const track of localStream.getTracks()) {\r\n    peerConnection.addTrack(track, localStream);\r\n  }\r\n\r\n  peerConnection.ontrack = ({ streams: [stream] }) => {\r\n    store.dispatch(setRemoteStream(stream));\r\n  };\r\n\r\n  // канал передачи данных и сообщения\r\n  peerConnection.ondatachannel = (event) => {\r\n    const dataChannel = event.channel;\r\n\r\n    dataChannel.onopen = () => {\r\n      console.log('peer connection is ready to receive data channel messages');\r\n    };\r\n\r\n    dataChannel.onmessage = (event) => {\r\n      store.dispatch(setMessage(true, event.data));\r\n    };\r\n  };\r\n\r\n  dataChannel = peerConnection.createDataChannel('chat');\r\n\r\n  dataChannel.onopen = () => {\r\n    console.log('chat data channel succesfully opened');\r\n  };\r\n\r\n  peerConnection.onicecandidate = (event) => {\r\n    console.log('geeting candidates from stun server');\r\n    if (event.candidate) {\r\n      socketConnection.sendWebRTCCandidate({\r\n        candidate: event.candidate,\r\n        connectedUserSocketId: connectedUserSocketId\r\n      });\r\n    }\r\n  };\r\n\r\n  peerConnection.onconnectionstatechange = (event) => {\r\n    if (peerConnection.connectionState === 'connected') {\r\n      console.log('succesfully connected with other peer');\r\n    }\r\n  };\r\n};\r\n\r\nexport const callToOtherUser = (calleeDetails) => {\r\n  connectedUserSocketId = calleeDetails.socketId;\r\n  store.dispatch(setCallState(callStates.CALL_IN_PROGRESS));\r\n  store.dispatch(setCallingDialogVisible(true));\r\n  socketConnection.sendPreOffer({\r\n    callee: calleeDetails,\r\n    caller: {\r\n      username: store.getState().dashboard.username\r\n    }\r\n  });\r\n};\r\n\r\nexport const handlePreOffer = (data) => {\r\n  if (checkIfCallIsPossible()) {\r\n    connectedUserSocketId = data.callerSocketId;\r\n    store.dispatch(setCallerUsername(data.callerUsername));\r\n    store.dispatch(setCallState(callStates.CALL_REQUESTED));\r\n  } else {\r\n    socketConnection.sendPreOfferAnswer({\r\n      callerSocketId: data.callerSocketId,\r\n      answer: preOfferAnswers.CALL_NOT_AVAILABLE\r\n    });\r\n  }\r\n};\r\n\r\nexport const acceptIncomingCallRequest = () => {\r\n  socketConnection.sendPreOfferAnswer({\r\n    callerSocketId: connectedUserSocketId,\r\n    answer: preOfferAnswers.CALL_ACCEPTED\r\n  });\r\n\r\n  store.dispatch(setCallState(callStates.CALL_IN_PROGRESS));\r\n};\r\n\r\nexport const rejectIncomingCallRequest = () => {\r\n  socketConnection.sendPreOfferAnswer({\r\n    callerSocketId: connectedUserSocketId,\r\n    answer: preOfferAnswers.CALL_REJECTED\r\n  });\r\n  resetCallData();\r\n};\r\n\r\nexport const handlePreOfferAnswer = (data) => {\r\n  store.dispatch(setCallingDialogVisible(false));\r\n\r\n  if (data.answer === preOfferAnswers.CALL_ACCEPTED) {\r\n    sendOffer();\r\n  } else {\r\n    let rejectionReason;\r\n    if (data.answer === preOfferAnswers.CALL_NOT_AVAILABLE) {\r\n      rejectionReason = 'Пользователь не может принять звонок';\r\n    } else {\r\n      rejectionReason = 'Пользователь отклонил звонок';\r\n    }\r\n    store.dispatch(setCallRejected({\r\n      rejected: true,\r\n      reason: rejectionReason\r\n    }));\r\n\r\n    resetCallData();\r\n  }\r\n};\r\n\r\nconst sendOffer = async () => {\r\n  const offer = await peerConnection.createOffer();\r\n  await peerConnection.setLocalDescription(offer);\r\n  socketConnection.sendWebRTCOffer({\r\n    calleeSocketId: connectedUserSocketId,\r\n    offer: offer\r\n  });\r\n};\r\n\r\nexport const handleOffer = async (data) => {\r\n  await peerConnection.setRemoteDescription(data.offer);\r\n  const answer = await peerConnection.createAnswer();\r\n  await peerConnection.setLocalDescription(answer);\r\n  socketConnection.sendWebRTCAnswer({\r\n    callerSocketId: connectedUserSocketId,\r\n    answer: answer\r\n  });\r\n};\r\n\r\nexport const handleAnswer = async (data) => {\r\n  await peerConnection.setRemoteDescription(data.answer);\r\n};\r\n\r\nexport const handleCandidate = async (data) => {\r\n  try {\r\n    console.log('adding ice candidates');\r\n    await peerConnection.addIceCandidate(data.candidate);\r\n  } catch (err) {\r\n    console.error('error occured when trying to add received ice candidate', err);\r\n  }\r\n};\r\n\r\nexport const checkIfCallIsPossible = () => {\r\n  if (store.getState().call.localStream === null ||\r\n  store.getState().call.callState !== callStates.CALL_AVAILABLE) {\r\n    return false;\r\n  } else {\r\n    return true;\r\n  }\r\n};\r\n\r\nlet screenSharingStream;\r\n\r\nexport const switchForScreenSharingStream = async () => {\r\n  if (!store.getState().call.screenSharingActive) {\r\n    try {\r\n      screenSharingStream = await navigator.mediaDevices.getDisplayMedia({ video: true });\r\n      store.dispatch(setScreenSharingActive(true));\r\n      const senders = peerConnection.getSenders();\r\n      const sender = senders.find(sender => sender.track.kind === screenSharingStream.getVideoTracks()[0].kind);\r\n      sender.replaceTrack(screenSharingStream.getVideoTracks()[0]);\r\n    } catch (err) {\r\n      console.error('error occured when trying to get screen sharing stream', err);\r\n    }\r\n  } else {\r\n    const localStream = store.getState().call.localStream;\r\n    const senders = peerConnection.getSenders();\r\n    const sender = senders.find(sender => sender.track.kind === localStream.getVideoTracks()[0].kind);\r\n    sender.replaceTrack(localStream.getVideoTracks()[0]);\r\n    store.dispatch(setScreenSharingActive(false));\r\n    screenSharingStream.getTracks().forEach(track => track.stop());\r\n  }\r\n};\r\n\r\nexport const handleUserHangedUp = () => {\r\n  resetCallDataAfterHangUp();\r\n};\r\n\r\nexport const hangUp = () => {\r\n  socketConnection.sendUserHangedUp({\r\n    connectedUserSocketId: connectedUserSocketId\r\n  });\r\n\r\n  resetCallDataAfterHangUp();\r\n};\r\n\r\nconst resetCallDataAfterHangUp = () => {\r\n  peerConnection.close();\r\n  peerConnection = null;\r\n  createPeerConnection();\r\n  resetCallData();\r\n\r\n  const localStream = store.getState().call.localStream;\r\n  localStream.getVideoTracks()[0].enabled = true;\r\n  localStream.getAudioTracks()[0].enabled = true;\r\n\r\n  if (store.getState().call.screenSharingActive) {\r\n    screenSharingStream.getTracks().forEach(track => {\r\n      track.stop();\r\n    });\r\n  }\r\n\r\n  store.dispatch(resetCallDataState());\r\n};\r\n\r\nexport const resetCallData = () => {\r\n  connectedUserSocketId = null;\r\n  store.dispatch(setCallState(callStates.CALL_AVAILABLE));\r\n};\r\n\r\nexport const sendMessageUsingDataChannel = (message) => {\r\n  dataChannel.send(message);\r\n};\r\n","import * as socketConnection from '../socketConnection/socketConnection';\r\nimport store from '../../storage/storage';\r\nimport { setGroupCallActive, setCallState, callStates, setGroupCallIncomingStreams, clearGroupCallData } from '../../storage/actions/callActions';\r\n\r\nlet myPeer;\r\nlet myPeerId;\r\nlet groupCallRoomId;\r\nlet groupCallHost = false;\r\n\r\nexport const connectWithMyPeer = () => {\r\n  myPeer = new window.Peer(undefined, {\r\n    path: '/peerjs',\r\n    host: '/',\r\n    port: '5000'\r\n  });\r\n\r\n  myPeer.on('open', (id) => {\r\n    console.log('succesfully connected with peer server');\r\n    myPeerId = id;\r\n  });\r\n\r\n  myPeer.on('call', call => {\r\n    call.answer(store.getState().call.localStream);\r\n    call.on('stream', incomingStream => {\r\n      const streams = store.getState().call.groupCallStreams;\r\n      const stream = streams.find(stream => stream.id === incomingStream.id);\r\n\r\n      if (!stream) {\r\n        addVideoStream(incomingStream);\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nexport const createNewGroupCall = () => {\r\n  groupCallHost = true;\r\n  socketConnection.registerGroupCall({\r\n    username: store.getState().dashboard.username,\r\n    peerId: myPeerId\r\n  });\r\n\r\n  store.dispatch(setGroupCallActive(true));\r\n  store.dispatch(setCallState(callStates.CALL_IN_PROGRESS));\r\n};\r\n\r\nexport const joinGroupCall = (hostSocketId, roomId) => {\r\n  const localStream = store.getState().call.localStream;\r\n  groupCallRoomId = roomId;\r\n\r\n  socketConnection.userWantsToJoinGroupCall({\r\n    peerId: myPeerId,\r\n    hostSocketId,\r\n    roomId,\r\n    localStreamId: localStream.id\r\n  });\r\n\r\n  store.dispatch(setGroupCallActive(true));\r\n  store.dispatch(setCallState(callStates.CALL_IN_PROGRESS));\r\n};\r\n\r\nexport const connectToNewUser = (data) => {\r\n  const localStream = store.getState().call.localStream;\r\n\r\n  const call = myPeer.call(data.peerId, localStream);\r\n\r\n  call.on('stream', (incomingStream) => {\r\n    const streams = store.getState().call.groupCallStreams;\r\n    const stream = streams.find(stream => stream.id === incomingStream.id);\r\n\r\n    if (!stream) {\r\n      addVideoStream(incomingStream);\r\n    }\r\n  });\r\n};\r\n\r\nexport const leaveGroupCall = () => {\r\n  if (groupCallHost) {\r\n    socketConnection.groupCallClosedByHost({\r\n      peerId: myPeerId\r\n    });\r\n  } else {\r\n    socketConnection.userLeftGroupCall({\r\n      streamId: store.getState().call.localStream.id,\r\n      roomId: groupCallRoomId\r\n    });\r\n  }\r\n  clearGroupData();\r\n};\r\n\r\nexport const clearGroupData = () => {\r\n  groupCallRoomId = null;\r\n  groupCallHost = null;\r\n  store.dispatch(clearGroupCallData());\r\n  myPeer.destroy();\r\n  connectWithMyPeer();\r\n\r\n  const localStream = store.getState().call.localStream;\r\n  localStream.getVideoTracks()[0].enabled = true;\r\n  localStream.getAudioTracks()[0].enabled = true;\r\n};\r\n\r\nexport const removeInactiveStream = (data) => {\r\n  const groupCallStreams = store.getState().call.groupCallStreams.filter(\r\n    stream => stream.id !== data.streamId\r\n  );\r\n  store.dispatch(setGroupCallIncomingStreams(groupCallStreams));\r\n};\r\n\r\nconst addVideoStream = (incomingStream) => {\r\n  const groupCallStreams = [\r\n    ...store.getState().call.groupCallStreams,\r\n    incomingStream\r\n  ];\r\n\r\n  store.dispatch(setGroupCallIncomingStreams(groupCallStreams));\r\n};\r\n\r\n// проверка группового вызова на активность\r\nexport const checkActiveGroupCall = () => {\r\n  if (store.getState().call.groupCallActive) {\r\n    return groupCallRoomId;\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n","import socketClient from 'socket.io-client';\r\nimport store from '../../storage/storage';\r\nimport * as mainActions from '../../storage/actions/mainPageActions';\r\nimport * as webRTCHandler from '../webRTC/webRTCHandler';\r\nimport * as webRTCGroupCallHandler from '../webRTC/GroupCallHandler';\r\n\r\nconst SERVER = 'http://localhost:5000';\r\n\r\nconst broadcastEventTypes = {\r\n  ACTIVE_USERS: 'ACTIVE_USERS',\r\n  GROUP_CALL_ROOMS: 'GROUP_CALL_ROOMS'\r\n};\r\n\r\nlet socket;\r\n\r\nexport const connectWithWebSocket = () => {\r\n  socket = socketClient(SERVER);\r\n\r\n  socket.on('connection', () => {\r\n    console.log('succesfully connected with wss server');\r\n    console.log(socket.id);\r\n  });\r\n\r\n  socket.on('broadcast', (data) => {\r\n    handleBroadcastEvents(data);\r\n  });\r\n\r\n  // вызов\r\n  socket.on('pre-offer', (data) => {\r\n    webRTCHandler.handlePreOffer(data);\r\n  });\r\n\r\n  socket.on('pre-offer-answer', (data) => {\r\n    webRTCHandler.handlePreOfferAnswer(data);\r\n  });\r\n\r\n  socket.on('webRTC-offer', (data) => {\r\n    webRTCHandler.handleOffer(data);\r\n  });\r\n\r\n  socket.on('webRTC-answer', (data) => {\r\n    webRTCHandler.handleAnswer(data);\r\n  });\r\n\r\n  socket.on('webRTC-candidate', (data) => {\r\n    webRTCHandler.handleCandidate(data);\r\n  });\r\n\r\n  socket.on('user-hanged-up', () => {\r\n    webRTCHandler.handleUserHangedUp();\r\n  });\r\n\r\n\r\n  socket.on('group-call-join-request', (data) => {\r\n    webRTCGroupCallHandler.connectToNewUser(data);\r\n  });\r\n\r\n  socket.on('group-call-user-left', (data) => {\r\n    webRTCGroupCallHandler.removeInactiveStream(data);\r\n  });\r\n};\r\n\r\nexport const registerNewUser = (username, roomNum) => {\r\n  socket.emit('register-new-user', {\r\n    username: username,\r\n    socketId: socket.id,\r\n    roomNum: roomNum\r\n  });\r\n};\r\nexport const registerNewRoomNum = (roomNum) => {\r\n  socket.emit('register-new-room-num', {\r\n    roomNum: roomNum,\r\n    socketId: socket.id\r\n  });\r\n};\r\n// отправка событий на сервер, связанных со звонком\r\n\r\nexport const sendPreOffer = (data) => {\r\n  socket.emit('pre-offer', data);\r\n};\r\n\r\nexport const sendPreOfferAnswer = (data) => {\r\n  socket.emit('pre-offer-answer', data);\r\n};\r\n\r\nexport const sendWebRTCOffer = (data) => {\r\n  socket.emit('webRTC-offer', data);\r\n};\r\n\r\nexport const sendWebRTCAnswer = (data) => {\r\n  socket.emit('webRTC-answer', data);\r\n};\r\n\r\nexport const sendWebRTCCandidate = (data) => {\r\n  socket.emit('webRTC-candidate', data);\r\n};\r\n\r\nexport const sendUserHangedUp = (data) => {\r\n  socket.emit('user-hanged-up', data);\r\n};\r\n\r\n// отправка событий группового звонка\r\n\r\nexport const registerGroupCall = (data) => {\r\n  socket.emit('group-call-register', data);\r\n};\r\n\r\nexport const userWantsToJoinGroupCall = (data) => {\r\n  socket.emit('group-call-join-request', data);\r\n};\r\n\r\nexport const userLeftGroupCall = (data) => {\r\n  socket.emit('group-call-user-left', data);\r\n};\r\n\r\nexport const groupCallClosedByHost = (data) => {\r\n  socket.emit('group-call-closed-by-host', data);\r\n};\r\n\r\nconst handleBroadcastEvents = (data) => {\r\n  switch (data.event) {\r\n    case broadcastEventTypes.ACTIVE_USERS:\r\n      let urlNum = window.location.href.split('/')[4]\r\n      let activeUsers = []\r\n      if (data.activeUsers.length >= 2) \r\n        {\r\n          activeUsers = data.activeUsers.filter(activeUser => activeUser.roomNum === urlNum)\r\n          console.log(data.activeUsers.map(({roomNum}) => roomNum).filter(function(num){\r\n            return num.roomNum === urlNum\r\n          }))\r\n        }else{\r\n          activeUsers = data.activeUsers\r\n        }\r\n      //const activeUsers = data.activeUsers.filter(activeUser => activeUser.roomNum === urlNum);\r\n      //sessionStorage.setItem('users', JSON.stringify(activeUsers.map(({username}) => username)))\r\n      store.dispatch(mainActions.setActiveUsers(activeUsers));\r\n      break;\r\n    case broadcastEventTypes.GROUP_CALL_ROOMS:\r\n      const groupCallRooms = data.groupCallRooms.filter(room => room.socketId !== socket.id);\r\n      const activeGroupCallRoomId = webRTCGroupCallHandler.checkActiveGroupCall();\r\n\r\n      if (activeGroupCallRoomId) {\r\n        const room = groupCallRooms.find(room => room.roomId === activeGroupCallRoomId);\r\n        if (!room) {\r\n          webRTCGroupCallHandler.clearGroupData();\r\n        }\r\n      }\r\n      store.dispatch(mainActions.setGroupCalls(groupCallRooms));\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n};\r\n","export const DASHBOARD_SET_USERNAME = 'DASHBOARD.SET_USERNAME';\r\nexport const DASHBOARD_SET_ACTIVE_USERS = 'DASHBOARD.SET_ACTIVE_USERS';\r\nexport const DASHBOARD_SET_GROUP_CALL_ROOMS = 'DASHBOARD.SET_GROUP_CALL_ROOMS';\r\n\r\nexport const setUsername = (username) => {\r\n  return {\r\n    type: DASHBOARD_SET_USERNAME,\r\n    username\r\n  };\r\n};\r\nexport const setActiveUsers = (activeUsers) => {\r\n  return {\r\n    type: DASHBOARD_SET_ACTIVE_USERS,\r\n    activeUsers\r\n  };\r\n};\r\n\r\nexport const setGroupCalls = (groupCallRooms) => {\r\n  return {\r\n    type: DASHBOARD_SET_GROUP_CALL_ROOMS,\r\n    groupCallRooms\r\n  };\r\n};\r\n","import * as mainActions from '../actions/mainPageActions';\r\n\r\nconst initState = {\r\n  username: '',\r\n  activeUsers: [],\r\n  groupCallRooms: []\r\n};\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case mainActions.DASHBOARD_SET_USERNAME:\r\n      return {\r\n        ...state,\r\n        username: action.username\r\n      };\r\n    case mainActions.DASHBOARD_SET_ACTIVE_USERS:\r\n      return {\r\n        ...state,\r\n        activeUsers: action.activeUsers\r\n      };\r\n    case mainActions.DASHBOARD_SET_GROUP_CALL_ROOMS:\r\n      return {\r\n        ...state,\r\n        groupCallRooms: action.groupCallRooms\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","export const callStates = {\r\n  CALL_UNAVAILABLE: 'CALL_UNAVAILABLE',\r\n  CALL_AVAILABLE: 'CALL_AVAILABLE',\r\n  CALL_REQUESTED: 'CALL_REQUESTED',\r\n  CALL_IN_PROGRESS: 'CALL_IN_PROGRESS'\r\n};\r\n\r\nexport const CALL_SET_LOCAL_STREAM = 'CALL.SET_LOCAL_STREAM';\r\nexport const CALL_SET_CALL_STATE = 'CALL.SET_CALL_STATE';\r\nexport const CALL_SET_CALLING_DIALOG_VISIBLE = 'CALL.SET_CALLING_DIALOG_VISIBLE';\r\nexport const CALL_SET_CALLER_USERNAME = 'CALL.SET_CALLER_USERNAME';\r\nexport const CALL_SET_CALL_REJECTED = 'CALL.SET_CALL_REJECTED';\r\nexport const CALL_SET_REMOTE_STREAM = 'CALL.SET_REMOTE_STREAM';\r\nexport const CALL_SET_LOCAL_MICROPHONE_ENABLED = 'CALL.SET_LOCAL_MICROPHONE_ENABLED';\r\nexport const CALL_SET_LOCAL_CAMERA_ENABLED = 'CALL.SET_LOCAL_CAMERA_ENABLED';\r\nexport const CALL_SET_SCREEN_SHARING_ACTIVE = 'CALL.SET_SCREEN_SHARING_ACTIVE';\r\nexport const CALL_RESET_CALL_STATE = 'CALL.RESET_CALL_STATE';\r\nexport const CALL_SET_GROUP_CALL_ACTIVE = 'CALL.CALL_SET_GROUP_CALL_ACTIVE';\r\nexport const CALL_SET_GROUP_CALL_STREAMS = 'CALL.SET_GROUP_CALL_STREAMS';\r\nexport const CALL_CLEAR_GROUP_CALL_DATA = 'CALL.CLEAR_GROUP_CALL_DATA';\r\nexport const CALL_SET_CHAT_MESSAGE = 'CALL.SET_CHAT_MESSAGE';\r\n\r\nexport const setLocalStream = (localStream) => {\r\n  return {\r\n    type: CALL_SET_LOCAL_STREAM,\r\n    localStream\r\n  };\r\n};\r\n\r\nexport const setCallState = (callState) => {\r\n  return {\r\n    type: CALL_SET_CALL_STATE,\r\n    callState\r\n  };\r\n};\r\n\r\nexport const setCallingDialogVisible = (visible) => {\r\n  return {\r\n    type: CALL_SET_CALLING_DIALOG_VISIBLE,\r\n    visible\r\n  };\r\n};\r\n\r\nexport const setCallerUsername = (callerUsername) => {\r\n  return {\r\n    type: CALL_SET_CALLER_USERNAME,\r\n    callerUsername\r\n  };\r\n};\r\n\r\nexport const setCallRejected = (callRejectedDetails) => {\r\n  return {\r\n    type: CALL_SET_CALL_REJECTED,\r\n    callRejected: {\r\n      rejected: callRejectedDetails.rejected,\r\n      reason: callRejectedDetails.reason\r\n    }\r\n  };\r\n};\r\n\r\nexport const setRemoteStream = (remoteStream) => {\r\n  return {\r\n    type: CALL_SET_REMOTE_STREAM,\r\n    remoteStream\r\n  };\r\n};\r\n\r\nexport const setLocalMicrophoneEnabled = (enabled) => {\r\n  return {\r\n    type: CALL_SET_LOCAL_MICROPHONE_ENABLED,\r\n    enabled\r\n  };\r\n};\r\n\r\nexport const setLocalCameraEnabled = (enabled) => {\r\n  return {\r\n    type: CALL_SET_LOCAL_CAMERA_ENABLED,\r\n    enabled\r\n  };\r\n};\r\n\r\nexport const setScreenSharingActive = (active) => {\r\n  return {\r\n    type: CALL_SET_SCREEN_SHARING_ACTIVE,\r\n    active\r\n  };\r\n};\r\n\r\nexport const resetCallDataState = () => {\r\n  return {\r\n    type: CALL_RESET_CALL_STATE\r\n  };\r\n};\r\n\r\nexport const setGroupCallActive = (active) => {\r\n  return {\r\n    type: CALL_SET_GROUP_CALL_ACTIVE,\r\n    active\r\n  };\r\n};\r\n\r\nexport const setGroupCallIncomingStreams = (groupCallStreams) => {\r\n  return {\r\n    type: CALL_SET_GROUP_CALL_STREAMS,\r\n    groupCallStreams\r\n  };\r\n};\r\n\r\nexport const clearGroupCallData = () => {\r\n  return {\r\n    type: CALL_CLEAR_GROUP_CALL_DATA\r\n  };\r\n};\r\n\r\nexport const setMessage = (messageReceived, messageContent) => {\r\n  return {\r\n    type: CALL_SET_CHAT_MESSAGE,\r\n    message: {\r\n      received: messageReceived,\r\n      content: messageContent\r\n    }\r\n  };\r\n};","import * as callActions from '../actions/callActions';\r\n\r\nconst initState = {\r\n  localStream: null,\r\n  callState: callActions.callStates.CALL_UNAVAILABLE,\r\n  callingDialogVisible: false,\r\n  callerUsername: '',\r\n  callRejected: {\r\n    rejected: false,\r\n    reason: ''\r\n  },\r\n  remoteStream: null,\r\n  localCameraEnabled: true,\r\n  localMicrophoneEnabled: true,\r\n  screenSharingActive: false,\r\n  groupCallActive: false,\r\n  groupCallStreams: [],\r\n  message: {\r\n    received: false,\r\n    content: ''\r\n  }\r\n};\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case callActions.CALL_SET_LOCAL_STREAM:\r\n      return {\r\n        ...state,\r\n        localStream: action.localStream\r\n      };\r\n    case callActions.CALL_SET_CALL_STATE:\r\n      return {\r\n        ...state,\r\n        callState: action.callState\r\n      };\r\n    case callActions.CALL_SET_CALLING_DIALOG_VISIBLE:\r\n      return {\r\n        ...state,\r\n        callingDialogVisible: action.visible\r\n      };\r\n    case callActions.CALL_SET_CALLER_USERNAME:\r\n      return {\r\n        ...state,\r\n        callerUsername: action.callerUsername\r\n      };\r\n    case callActions.CALL_SET_CALL_REJECTED:\r\n      return {\r\n        ...state,\r\n        callRejected: action.callRejected\r\n      };\r\n    case callActions.CALL_SET_REMOTE_STREAM:\r\n      return {\r\n        ...state,\r\n        remoteStream: action.remoteStream\r\n      };\r\n    case callActions.CALL_SET_LOCAL_CAMERA_ENABLED:\r\n      return {\r\n        ...state,\r\n        localCameraEnabled: action.enabled\r\n      };\r\n    case callActions.CALL_SET_LOCAL_MICROPHONE_ENABLED:\r\n      return {\r\n        ...state,\r\n        localMicrophoneEnabled: action.enabled\r\n      };\r\n    case callActions.CALL_SET_SCREEN_SHARING_ACTIVE:\r\n      return {\r\n        ...state,\r\n        screenSharingActive: action.active\r\n      };\r\n    case callActions.CALL_RESET_CALL_STATE:\r\n      return {\r\n        ...state,\r\n        remoteStream: null,\r\n        screenSharingActive: false,\r\n        callerUsername: '',\r\n        localMicrophoneEnabled: true,\r\n        localCameraEnabled: true,\r\n        callingDialogVisible: false\r\n      };\r\n    case callActions.CALL_SET_GROUP_CALL_ACTIVE:\r\n      return {\r\n        ...state,\r\n        groupCallActive: action.active\r\n      };\r\n    case callActions.CALL_SET_GROUP_CALL_STREAMS:\r\n      return {\r\n        ...state,\r\n        groupCallStreams: action.groupCallStreams\r\n      };\r\n    case callActions.CALL_CLEAR_GROUP_CALL_DATA:\r\n      return {\r\n        ...state,\r\n        groupCallActive: false,\r\n        groupCallStreams: [],\r\n        callState: callActions.callStates.CALL_AVAILABLE,\r\n        localMicrophoneEnabled: true,\r\n        localCameraEnabled: true\r\n      };\r\n    case callActions.CALL_SET_CHAT_MESSAGE:\r\n      return {\r\n        ...state,\r\n        message: action.message\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;","import { combineReducers } from 'redux';\r\nimport mainAdapter from './adapter/mainPageAdapter';\r\nimport callAdapter from './adapter/callAdapter';\r\n\r\nexport default combineReducers({\r\n  dashboard: mainAdapter,\r\n  call: callAdapter\r\n});\r\n","import { createStore } from 'redux';\r\nimport mainAdapter from './adapter';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\n\r\nconst store = createStore(\r\n  mainAdapter,\r\n  composeWithDevTools()\r\n);\r\n\r\nexport default store;\r\n","import { initializeApp } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyDEFyJWoe7h0cbGP_j6_yokzqujCHOA8Xc\",\r\n    authDomain: \"utopia-386509.firebaseapp.com\",\r\n    projectId: \"utopia-386509\",\r\n    storageBucket: \"utopia-386509.appspot.com\",\r\n    messagingSenderId: \"620057456341\",\r\n    appId: \"1:620057456341:web:a292cc55257b3f35347c5c\",\r\n    measurementId: \"G-Q6NTJXXF0Z\"\r\n  };\r\n  const app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\n\r\nexport { db };","import {React} from 'react';\r\nimport { callToOtherUser } from '../../../connection/webRTC/webRTCHandler';\r\nimport { callStates } from '../../../storage/actions/callActions';\r\n\r\nconst UsersListItem = (props) => {\r\n  const { activeUser, callState } = props;\r\n\r\n  const handleListItemPressed = () => {\r\n    if (callState === callStates.CALL_AVAILABLE) {\r\n      callToOtherUser(activeUser);\r\n    }\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className='user_list_item' onClick={handleListItemPressed}>\r\n      \r\n        <img className='user_list_image' src={\"https://em-content.zobj.net/thumbs/120/apple/354/alien_1f47d.png\"} alt='userimage'/>\r\n      \r\n      <span className='user_list_text'>{activeUser.username}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UsersListItem;\r\n","import { React, useState, useEffect } from \"react\";\r\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\r\nimport { db } from \"../Todo/firebase\";\r\nimport UsersListItem from \"./UsersListItem\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport \"./UsersList.css\";\r\n\r\nconst UsersList = ({ activeUsers, callState }) => {\r\n  const [users, setUsers] = useState([]);\r\n  \r\n  // const fetchPost = async () => {\r\n  //   const queryString = window.location.search;\r\n  //   const urlParams = new URLSearchParams(queryString);\r\n  //   let roomId = urlParams.get(\"room\");\r\n  //   const q = query(collection(db, \"Rooms\"), where(\"room\", \"==\", roomId));\r\n  //   await getDocs(q).then((querySnapshot) => {\r\n  //     const newData = querySnapshot.docs.map((doc) => ({\r\n  //       ...doc.data(),\r\n  //       id: doc.id,\r\n  //     }));\r\n  //     setUsers(newData);\r\n  //     console.log(users, newData);\r\n  //   });\r\n  // };\r\n\r\n  // useEffect(() => {\r\n  //   fetchPost();\r\n  // }, []);\r\n  return (\r\n    <div className=\"user_list_container\">\r\n      {activeUsers.map((activeUser, i) => (\r\n        <UsersListItem\r\n          key={i}\r\n          activeUser={activeUser}\r\n          callState={callState}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ dashboard, call }) => ({\r\n  ...dashboard,\r\n  ...call,\r\n});\r\n\r\nexport default connect(mapStateToProps)(UsersList);\r\n","import {React} from 'react';\r\nimport { callToOtherUser } from '../../../connection/webRTC/webRTCHandler';\r\nimport { callStates } from '../../../storage/actions/callActions';\r\n\r\nconst UsersListItemClosed = (props) => {\r\n  const { activeUser, callState } = props;\r\n\r\n  const handleListItemPressed = () => {\r\n    if (callState === callStates.CALL_AVAILABLE) {\r\n      callToOtherUser(activeUser);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className='user_list_item_closed' onClick={handleListItemPressed}>\r\n      \r\n        <img className='user_list_image_closed' src={\"https://em-content.zobj.net/thumbs/120/apple/354/alien_1f47d.png\"} alt='userimage'/>\r\n      \r\n      <span className='user_list_text_closed'>{activeUser.username}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UsersListItemClosed;\r\n","import { React, useState, useEffect } from \"react\";\r\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\r\nimport { db } from \"../Todo/firebase\";\r\nimport UsersListItemClosed from \"./UsersListItemClosed\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport \"./UsersListClosed.css\";\r\n\r\nconst UsersList = ({ activeUsers, callState }) => {\r\n  return (\r\n    <div className=\"user_list_container\">\r\n      {/* {users.map((activeUser, i) => ( */}\r\n      {activeUsers.map((activeUser, i) => (\r\n        <UsersListItemClosed\r\n          key={i}\r\n          activeUser={activeUser}\r\n          callState={callState}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ dashboard, call }) => ({\r\n  ...dashboard,\r\n  ...call,\r\n});\r\n\r\nexport default connect(mapStateToProps)(UsersList);\r\n","import React, { useRef, useEffect } from 'react';\r\n\r\n\r\n\r\nconst LocalVideoView = props => {\r\n  const { localStream } = props;\r\n  const localVideoRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (localStream) {\r\n      const localVideo = localVideoRef.current;\r\n      localVideo.srcObject = localStream;\r\n\r\n      localVideo.onloadedmetadata = () => {\r\n        localVideo.play();\r\n      };\r\n    }\r\n  }, [localStream]);\r\n\r\n  return (\r\n    <div className='local_video_cam'>\r\n      <video className='video_cam' ref={localVideoRef} autoPlay muted />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LocalVideoView;\r\n","import React, { useRef, useEffect } from 'react';\r\n\r\n\r\n\r\nconst LocalVideoView = props => {\r\n  const { remoteStream } = props;\r\n  const remoteVideoRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (remoteStream) {\r\n      const remoteVideo = remoteVideoRef.current;\r\n      remoteVideo.srcObject = remoteStream;\r\n\r\n      remoteVideo.onloadedmetadata = () => {\r\n        remoteVideo.play();\r\n      };\r\n    }\r\n  }, [remoteStream]);\r\n\r\n  return (\r\n    <div>\r\n      <video ref={remoteVideoRef} autoPlay />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LocalVideoView;\r\n","import React, { useEffect } from 'react';\r\n\r\n import './RejectedCallWindow.css';\r\n\r\nconst RejectedCallWindow = ({ reason, hideCallRejectedDialog }) => {\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      hideCallRejectedDialog({\r\n        rejected: false,\r\n        reason: ''\r\n      });\r\n    }, [4000]);\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <div className='rejected_call_window_container'>\r\n      <span>\r\n        {reason}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RejectedCallWindow;\r\n","import React, {useState} from 'react';\r\nimport { acceptIncomingCallRequest, rejectIncomingCallRequest } from '../../../connection/webRTC/webRTCHandler';\r\nimport './IncomingCallDialog.css';\r\n\r\nconst IncomingCallDialog = ({ callerUsername }) => {\r\n  const handleAcceptButtonPressed = () => {\r\n    acceptIncomingCallRequest();\r\n  };\r\n\r\n  const handleRejectButtonPressed = () => {\r\n    rejectIncomingCallRequest();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n    <div className='direct_call_dialog background_secondary_color'>\r\n      \r\n      <span className='direct_call_dialog_caller_name'>{callerUsername}</span>\r\n      <div className='direct_call_dialog_button_container'>\r\n        <button className='direct_call_dialog_accept_button' onClick={handleAcceptButtonPressed}>\r\n          Принять\r\n        </button>\r\n        <button className='direct_call_dialog_reject_button' onClick={handleRejectButtonPressed}>\r\n          Отклонить\r\n        </button>\r\n      </div>\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IncomingCallDialog;\r\n","import React from 'react';\r\nimport './CallWindow.css';\r\nimport { hangUp } from '../../../connection/webRTC/webRTCHandler';\r\nimport { MdCallEnd } from 'react-icons/md';\r\n\r\nconst CallWindow = () => {\r\n  const handleHangUpButtonPressed = () => {\r\n    hangUp();\r\n  };\r\n\r\n  return (\r\n    <div className='call_window_container'>\r\n      <span>Звоним</span>\r\n      <div  onClick={handleHangUpButtonPressed}>\r\n        <MdCallEnd style={{ width: '20px', height: '20px', fill: '#e6e5e8' }} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CallWindow;\r\n","import React from 'react';\r\n\r\nconst ControlButton = (props) => {\r\n  const { onClickHandler } = props;\r\n  return (\r\n    <button className='conversation_button' onClick={onClickHandler}>\r\n      {props.children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default ControlButton;\r\n","import React from 'react';\r\nimport { MdCallEnd, MdMic, MdMicOff, MdVideocam, MdVideocamOff, MdVideoLabel, MdCamera } from 'react-icons/md';\r\nimport ControlButton from './ControlButton';\r\nimport { switchForScreenSharingStream, hangUp } from '../../../connection/webRTC/webRTCHandler';\r\n\r\n\r\n\r\nconst ControlButtons = (props) => {\r\n  const {\r\n    localStream,\r\n    localCameraEnabled,\r\n    localMicrophoneEnabled,\r\n    setCameraEnabled,\r\n    setMicrophoneEnabled,\r\n    screenSharingActive,\r\n    groupCall\r\n  } = props;\r\n\r\n  const handleMicButtonPressed = () => {\r\n    const micEnabled = localMicrophoneEnabled;\r\n    localStream.getAudioTracks()[0].enabled = !micEnabled;\r\n    setMicrophoneEnabled(!micEnabled);\r\n  };\r\n\r\n  const handleCameraButtonPressed = () => {\r\n    const cameraEnabled = localCameraEnabled;\r\n    localStream.getVideoTracks()[0].enabled = !cameraEnabled;\r\n    setCameraEnabled(!cameraEnabled);\r\n  };\r\n\r\n  const handleScreenSharingButtonPressed = () => {\r\n    switchForScreenSharingStream();\r\n  };\r\n\r\n  const handleHangUpButtonPressed = () => {\r\n    hangUp();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ControlButton onClickHandler={handleMicButtonPressed}>\r\n        {localMicrophoneEnabled ? <MdMic className='icon_buttons_call' /> : <MdMicOff className='icon_buttons_call'/>}\r\n      </ControlButton>\r\n      {!groupCall && <ControlButton onClickHandler={handleHangUpButtonPressed}>\r\n        <MdCallEnd className='icon_buttons_call'/>\r\n      </ControlButton>}\r\n      <ControlButton onClickHandler={handleCameraButtonPressed}>\r\n        {localCameraEnabled ? <MdVideocam className='icon_buttons_call'/> : <MdVideocamOff className='icon_buttons_call'/>}\r\n      </ControlButton>\r\n      {!groupCall && <ControlButton onClickHandler={handleScreenSharingButtonPressed}>\r\n        {screenSharingActive ? <MdCamera className='icon_buttons_call'/> : <MdVideoLabel className='icon_buttons_call'/>}\r\n      </ControlButton>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ControlButtons;\r\n","import React from 'react';\r\n\r\nconst MessageDisplayer = (props) => {\r\n  return (\r\n    <div className='message_displayer'>\r\n      {props.message}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageDisplayer;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { sendMessageUsingDataChannel } from '../../../connection/webRTC/webRTCHandler';\r\nimport MessageDisplayer from './MessageDisplayer';\r\n\r\nimport './Messenger.css';\r\n\r\nconst Messenger = ({ message, setDirectCallMessage }) => {\r\n  const [inputValue, setInputValue] = useState('');\r\n\r\n  const handleOnKeyDownEvent = (e) => {\r\n    if (e.keyCode === 13) {\r\n      sendMessageUsingDataChannel(inputValue);\r\n      setInputValue('');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (message.received) {\r\n      setTimeout(() => {\r\n        setDirectCallMessage(false, '');\r\n      }, [10000]);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [message.received]);\r\n\r\n  return (\r\n    <>\r\n      <input\r\n        className='messages_input'\r\n        type='text'\r\n        value={inputValue}\r\n        onChange={(e) => { setInputValue(e.target.value); }}\r\n        onKeyDown={handleOnKeyDownEvent}\r\n        placeholder='Type your message'\r\n      />\r\n      {message.received && <MessageDisplayer message={message.content} />}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Messenger;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport LocalVideoView from '../LocalVideoView/LocalVideoView';\r\nimport RemoteVideoView from '../RemoteVideoView/RemoteVideoView';\r\nimport RejectedCallWindow from '../CallRejectedDialog/RejectedCallWindow';\r\nimport IncomingCallDialog from '../IncomingCallDialog/IncomingCallDialog';\r\nimport CallWindow from '../CallWindow/CallWindow';\r\nimport { callStates, setCallRejected, setLocalCameraEnabled, setLocalMicrophoneEnabled, setMessage } from '../../../storage/actions/callActions';\r\nimport ControlButtons from '../ConversationButtons/ControlButtons';\r\nimport Messenger from '../Messenger/Messenger';\r\n\r\nconst Call = (props) => {\r\n  const {\r\n    localStream,\r\n    remoteStream,\r\n    callState,\r\n    callerUsername,\r\n    callingDialogVisible,\r\n    callRejected,\r\n    hideCallRejectedDialog,\r\n    setDirectCallMessage,\r\n    message\r\n  } = props;\r\n\r\n  return (\r\n    <>\r\n      <LocalVideoView localStream={localStream} />\r\n      {remoteStream && callState === callStates.CALL_IN_PROGRESS && <RemoteVideoView remoteStream={remoteStream} />}\r\n      {callRejected.rejected && <RejectedCallWindow\r\n        reason={callRejected.reason}\r\n        hideCallRejectedDialog={hideCallRejectedDialog}\r\n                                />}\r\n      {callState === callStates.CALL_REQUESTED && <IncomingCallDialog callerUsername={callerUsername} />}\r\n      {callingDialogVisible && <CallWindow />}\r\n      {remoteStream && callState === callStates.CALL_IN_PROGRESS && <ControlButtons {...props} />}\r\n      {remoteStream && callState === callStates.CALL_IN_PROGRESS && <Messenger message={message} setDirectCallMessage={setDirectCallMessage} />}\r\n    </>\r\n  );\r\n};\r\n\r\nfunction mapStoreStateToProps ({ call }) {\r\n  return {\r\n    ...call\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps (dispatch) {\r\n  return {\r\n    hideCallRejectedDialog: (callRejectedDetails) => dispatch(setCallRejected(callRejectedDetails)),\r\n    setCameraEnabled: (enabled) => dispatch(setLocalCameraEnabled(enabled)),\r\n    setMicrophoneEnabled: (enabled) => dispatch(setLocalMicrophoneEnabled(enabled)),\r\n    setDirectCallMessage: (received, content) => dispatch(setMessage(received, content))\r\n  };\r\n}\r\n\r\nexport default connect(mapStoreStateToProps, mapDispatchToProps)(Call);\r\n","import React, { useEffect } from 'react'\r\nimport './LoginSignout.css'\r\nexport const LoginSignout = () => {\r\n  const googleApi = window.gapi;\r\n  const google = window.google;\r\n\r\n  const CLIENT_ID = '620057456341-ju225f3hvbd0fiu5gfm9ge59skmaiun4.apps.googleusercontent.com';\r\n  const API_KEY = 'AIzaSyAp-9m3vJA_N1AqUtFffjbfob42CLYokbY';\r\n  const DISCOVERY_DOC = 'https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest';\r\n  const SCOPES = \"https://www.googleapis.com/auth/calendar\";\r\n\r\n  const accessToken = localStorage.getItem('access_token');\r\n  const expiresIn = localStorage.getItem('expires_in');\r\n\r\n  let googleApiInitialized = false, googleDataInited = false, tokenClient;\r\n\r\n  useEffect(() => {\r\n    googleApiLoad()\r\n    googleDataLoaded()\r\n  }, [])\r\n\r\n  function googleApiLoad() {\r\n    googleApi.load('client', initializeGoogleApiClient);\r\n  }\r\n\r\n  async function initializeGoogleApiClient() {\r\n    await googleApi.client.init({\r\n      apiKey: API_KEY,\r\n      discoveryDocs: [DISCOVERY_DOC],\r\n    });\r\n    googleApiInitialized = true;\r\n\r\n    if (accessToken && expiresIn) {\r\n      googleApi.client.setToken({\r\n        access_token: accessToken,\r\n        expires_in: expiresIn,\r\n      });\r\n      listUpcomingEvents();\r\n    }\r\n  }\r\n\r\n  function googleDataLoaded() {\r\n    tokenClient = google.accounts.oauth2.initTokenClient({\r\n      client_id: CLIENT_ID,\r\n      scope: SCOPES,\r\n      callback: '', // определяется позже\r\n    });\r\n\r\n    googleDataInited = true;\r\n  }\r\n\r\n  //Позволяет взаимодействовать с пользователем после загрузки библиотек.\r\n\r\n  function handleAuthClick() {\r\n    tokenClient.callback = async (resp) => {\r\n      if (resp.error) {\r\n        throw (resp);\r\n      }\r\n      await listUpcomingEvents();\r\n      const { access_token, expires_in } = googleApi.client.getToken();\r\n      localStorage.setItem('access_token', access_token);\r\n      localStorage.setItem('expires_in', expires_in)\r\n    };\r\n\r\n    if (!(accessToken && expiresIn)) {\r\n      // Выбор учетную запись Google и согласие на передачу данных при создании новой сессии.\r\n      tokenClient.requestAccessToken({ prompt: 'consent' });\r\n    } else {\r\n      // Пропустить выбор учетной записи и согласия для существующего сеанса.\r\n      tokenClient.requestAccessToken({ prompt: '' });\r\n    }\r\n  }\r\n\r\n  //Выход из аккаунта\r\n\r\n  function handleSignoutClick() {\r\n    const token = googleApi.client.getToken();\r\n    if (token !== null) {\r\n      google.accounts.oauth2.revoke(token.access_token);\r\n      googleApi.client.setToken('');\r\n      localStorage.clear();\r\n    }\r\n  }\r\n\r\n  async function listUpcomingEvents() {\r\n    let response;\r\n    try {\r\n      const request = {\r\n        'calendarId': 'primary',\r\n        'timeMin': (new Date()).toISOString(),\r\n        'showDeleted': false,\r\n        'singleEvents': true,\r\n        'maxResults': 10,\r\n        'orderBy': 'startTime',\r\n      };\r\n      response = await googleApi.client.calendar.events.list(request);\r\n    } catch (err) {\r\n      document.getElementById('content').innerText = err.message;\r\n      return;\r\n    }\r\n\r\n    const events = response.result.items;\r\n    if (!events || events.length === 0) {\r\n      document.getElementById('content').innerText = 'Событий не найдено.';\r\n      return;\r\n    }\r\n    // настройка отображения событий\r\n    const output = events.reduce(\r\n      (str, event) => `${str}${event.summary} (${event.start.dateTime || event.start.date})\\n`,'События:\\n');\r\n    document.getElementById('content').innerText = output;\r\n  }\r\n  \r\n  \r\n  return (\r\n    <div className='calendar_space_return'>\r\n      <button id=\"authorize_button\" className='enter_google_account' hidden={accessToken && expiresIn} onClick={handleAuthClick}>Войти</button>\r\n      <button id=\"signout_button\" className='exit_google_account' hidden={!accessToken && !expiresIn}   onClick={handleSignoutClick}>Выйти</button>\r\n      <pre id=\"content\" className='events_content' style={{ whiteSpace: 'pre-wrap' }}></pre>\r\n    </div>\r\n  )\r\n}","import React, {useEffect} from 'react';\r\n\r\nimport './CallInfo.css';\r\n\r\nconst CallInfo = ({ username }) => {\r\n  \r\n  return (\r\n    <div className='main_info_container'>\r\n      <span className='main_info_text_title'>\r\n        Привет {username}.\r\n      </span>\r\n      <span className='main_info_text'>\r\n        <p>Ты можешь начать диалог с человеком в комнате напрямую или создать/присоединиться к групповому чату.</p>\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CallInfo;\r\n","import React from 'react';\r\nimport * as webRTCGroupCallHandler from '../../../connection/webRTC/GroupCallHandler';\r\n\r\nconst GroupCallRoomsListItem = ({ room }) => {\r\n  const handleListItemPressed = () => {\r\n    webRTCGroupCallHandler.joinGroupCall(room.socketId, room.roomId);\r\n  };\r\n\r\n  return (\r\n    <div onClick={handleListItemPressed} className='group_calls_list_item background_main_color'>\r\n      <span>{room.hostName}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GroupCallRoomsListItem;\r\n","import React from 'react';\r\nimport GroupCallRoomsListItem from './GroupCallRoomsListItem';\r\nimport { connect } from 'react-redux';\r\n// import './GroupCallRoomsList.css';\r\n\r\nconst GroupCallRoomsList = (props) => {\r\n  const { groupCallRooms } = props;\r\n  return (\r\n    <>\r\n      {groupCallRooms.map(room => <GroupCallRoomsListItem key={room.roomId} room={room} />)}\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ dashboard }) => (\r\n  {\r\n    ...dashboard\r\n  }\r\n);\r\n\r\nexport default connect(mapStoreStateToProps)(GroupCallRoomsList);\r\n","import React from 'react';\r\nimport './GroupCallButton.css';\r\n\r\nconst GroupCallButton = ({ onClickHandler, label }) => {\r\n  return (\r\n    <button onClick={onClickHandler} className=\"create_room_btn\">\r\n      { label }\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default GroupCallButton;\r\n","import React, { useRef, useEffect } from 'react';\r\n\r\n\r\nconst GroupCallVideo = ({ stream }) => {\r\n  const videoRef = useRef();\r\n\r\n  useEffect(() => {\r\n    const remoteGroupCallVideo = videoRef.current;\r\n    remoteGroupCallVideo.srcObject = stream;\r\n    remoteGroupCallVideo.onloadedmetadata = () => {\r\n      remoteGroupCallVideo.play();\r\n    };\r\n  }, [stream]);\r\n\r\n  return (\r\n    <div className='group_member_video_container'>\r\n      <video className='group_member_video' ref={videoRef} autoPlay />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GroupCallVideo;\r\n","import React from 'react';\r\nimport ControlButtons from '../ConversationButtons/ControlButtons';\r\n\r\nimport './GroupCallRoom.css';\r\nimport GroupCallVideo from './GroupCallVideo';\r\n\r\nconst GroupCallRoom = (props) => {\r\n  const { groupCallStreams } = props;\r\n  return (\r\n    <div className='group_call_room_container'>\r\n      <span className='group_call_title'>Групповой звонок</span>\r\n      <div className='group_call_videos_container'>\r\n        {\r\n          groupCallStreams.map(stream => {\r\n            return <GroupCallVideo key={stream.id} stream={stream} />;\r\n          })\r\n        }\r\n      </div>\r\n      <ControlButtons {...props} groupCall />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GroupCallRoom;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport GroupCallButton from '../GroupCallButton/GroupCallButton';\r\nimport { callStates, setLocalCameraEnabled, setLocalMicrophoneEnabled } from '../../../storage/actions/callActions';\r\nimport * as webRTCGroupCallHandler from '../../../connection/webRTC/GroupCallHandler';\r\nimport GroupCallRoom from '../GroupCallRoom/GroupCallRoom';\r\n\r\nconst GroupCall = (props) => {\r\n  // eslint-disable-next-line\r\n  const { callState, localStream, groupCallActive, groupCallStreams } = props;\r\n\r\n  const createRoom = () => {\r\n    webRTCGroupCallHandler.createNewGroupCall();\r\n  };\r\n\r\n  const leaveRoom = () => {\r\n    webRTCGroupCallHandler.leaveGroupCall();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {!groupCallActive && localStream && callState !== callStates.CALL_IN_PROGRESS &&\r\n        <GroupCallButton onClickHandler={createRoom} label='Создать комнату' />}\r\n      {groupCallActive && <GroupCallRoom {...props} />}\r\n      {groupCallActive && <GroupCallButton onClickHandler={leaveRoom} label='Покинуть комнату' />}\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ call }) => ({\r\n  ...call\r\n});\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    setCameraEnabled: enabled => dispatch(setLocalCameraEnabled(enabled)),\r\n    setMicrophoneEnabled: enabled => dispatch(setLocalMicrophoneEnabled(enabled))\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps, mapActionsToProps)(GroupCall);\r\n","import React from \"react\";\r\nexport default function Todo({ todo, toggleComplete, handleDelete, handleEdit,}) {\r\n  const [newTitle, setNewTitle] = React.useState(todo.title);\r\n\r\n  const handleChange = (e) => {\r\n    e.preventDefault();\r\n    if (todo.complete === true) {\r\n      setNewTitle(todo.title);\r\n    } else {\r\n      todo.title = \"\";\r\n      setNewTitle(e.target.value);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"todo\">\r\n      <input\r\n        style={{ textDecoration: todo.completed && \"line-through\" }}\r\n        type=\"text\"\r\n        value={todo.title === \"\" ? newTitle : todo.title}\r\n        className=\"listTodo\"\r\n        onChange={handleChange}\r\n      />\r\n      <div className=\"buttons_todo_container\">\r\n        <button\r\n          className=\"button-complete\"\r\n          onClick={() => toggleComplete(todo)}\r\n        >\r\n         \r\n        </button>\r\n        <button\r\n          className=\"button-edit\"\r\n          onClick={() => handleEdit(todo, newTitle)}\r\n        >\r\n          \r\n        </button>\r\n        <button className=\"button-delete\" onClick={() => handleDelete(todo.id)}>\r\n          \r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\nimport { db } from \"./firebase\";\r\nimport { collection, addDoc } from \"firebase/firestore\";\r\nexport default function AddTodo() {\r\n  const [title, setTitle] = React.useState(\"\");\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (title !== \"\") {\r\n      await addDoc(collection(db, \"todos\"), {\r\n        title,\r\n        completed: false,\r\n      });\r\n      setTitle(\"\");\r\n    }\r\n  };\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"submit_todo_form\">\r\n      <div className=\"input_container\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Введите задачу\"\r\n          value={title}\r\n          onChange={(e) => setTitle(e.target.value)}\r\n        />\r\n      </div>\r\n      <div className=\"btn_container\">\r\n        <button className=\"add_todo_btn\">\r\n          <span className=\"add_btn_title\">Добавить</span>\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}","import React, { useState } from 'react';\r\nimport ReactPlayer from 'react-player';\r\nimport { Button, Form, FormGroup, Label, Input } from 'reactstrap';\r\nimport './VideoPlayer.css'\r\n\r\nfunction PlayerExample () {\r\n    const[youtubeVideo, setYoutubeVideo] = useState('');\r\n    const[youtubeUrl, setYoutubeUrl] = useState('https://youtu.be/SASZi1feEjE');\r\n    const[youtubeError, setYoutubeError] = useState('');\r\n    const handleYoutubeChange=(e)=>{\r\n        setYoutubeVideo(e.target.value)\r\n    }\r\n    const handleYoutubeSubmit=(e)=>{\r\n        e.preventDefault();\r\n        const youtubeRegex = /http(?:s?):\\/\\/(?:www\\.)?youtu(?:be\\.com\\/watch\\?v=|\\.be\\/)([\\w\\-\\_]*)(&(amp;)?‌​[\\w\\?‌​=]*)?/\r\n        if(youtubeRegex.test(youtubeVideo)){\r\n            setYoutubeUrl(youtubeVideo);\r\n        }else{\r\n            setYoutubeError('Некорректная ссылка')\r\n        }\r\n    }\r\n    return(\r\n    <div>\r\n        <form onSubmit={handleYoutubeSubmit}>\r\n            <input type='text' placeholder='Вставь URL с Youtube' onChange={handleYoutubeChange}></input>\r\n            <Button className='load_video_btn' type='submit'>Загрузить</Button>\r\n        </form>\r\n        {youtubeUrl && <div className='error_video_url'>{youtubeError}</div>}\r\n        <div className='video_player'>            \r\n            <ReactPlayer url={youtubeUrl}></ReactPlayer>\r\n        </div>\r\n    </div>\r\n  );\r\n\r\n}\r\nexport default PlayerExample","import React from 'react'\r\nimport './AudioPlayer.css'\r\nclass AudioPlayer extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <p>Дождь</p>\r\n        <audio ref=\"audio_tag\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/rain.mp3?alt=media&token=ebdde4c1-f9fc-4855-ada4-a44d63883f35\" controls/>\r\n        <p>Кот</p>\r\n        <audio ref=\"audio_tag\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/cat.mp3?alt=media&token=fa540539-67e5-435a-9548-95d9b2c7ebd0\" controls/>\r\n        <p>Библиотека</p>\r\n        <audio ref=\"audio_tag\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/library.mp3?alt=media&token=99ceb87f-aaa7-4740-9c70-b58e1e6e828c\" controls/>\r\n        <p>Полночь летом</p>\r\n        <audio ref=\"audio_tag\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/midnight%20in%20summer.mp3?alt=media&token=dbf4a3c9-fb4c-4f4e-b932-babc353d2d54\" controls/>\r\n        <p>Люди</p>\r\n        <audio ref=\"audio_tag\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/people.mp3?alt=media&token=bf1bc600-b334-4cad-9d5d-77c74cc1733e\" controls/>\r\n        <p>Винил</p>\r\n        <audio ref=\"audio_tag\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/vinil.mp3?alt=media&token=6283e087-bd1f-4789-8498-69b78a1532f8\" controls/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AudioPlayer;","import React, { useState } from \"react\";\r\nconst ConfigurePage = (props) => {\r\n    const { updateConfigure, updatePomodoro } = props;\r\n  const [pomodoro, setPomodoro] = useState(\"\");\r\n  const [pomoBreak, setPomoBreak] = useState(\"\");\r\n  const onSubmitForm = (e) => {\r\n    e.preventDefault();\r\n    if (pomodoro === \"\" || pomoBreak === \"\") return;\r\n    updateConfigure(false);\r\n    updatePomodoro(pomodoro, pomoBreak);\r\n  };\r\n  const changeConfigure = () => {\r\n    updateConfigure(false);\r\n  };\r\n  return (\r\n    <div className=\"configure__section\">\r\n      \r\n          <h2 className=\"settings_label\">Настройки</h2>\r\n          <p onClick={changeConfigure}>\r\n          </p>\r\n        \r\n        <form className=\"configure_section_form\" onSubmit={onSubmitForm}>\r\n          <div className=\"configure_section_form_div\">\r\n            <label className=\"focus_time_label\">Фокус (в минутах):</label>\r\n            <input className=\"input_focus_time\"\r\n              type=\"number\"\r\n              onChange={(e) => {\r\n                setPomodoro(e.target.value);\r\n              }}\r\n              value={pomodoro}\r\n              required\r\n              maxLength=\"2\"\r\n              minLength=\"0\"\r\n              max=\"59\"\r\n              min=\"0\"\r\n              step=\"1\"\r\n            />\r\n          </div>\r\n          <div className=\"break_time_container\">\r\n            <label className=\"break_time_label\">Перерыв (в минутах):</label>\r\n            <input className=\"break_time_input\"\r\n              type=\"number\"\r\n              onChange={(e) => {\r\n                setPomoBreak(e.target.value);\r\n              }}\r\n              value={pomoBreak}\r\n              required\r\n              maxLength=\"2\"\r\n              minLength=\"0\"\r\n              max=\"59\"\r\n              min=\"0\"\r\n              step=\"1\"\r\n            />\r\n          </div>\r\n          <div className=\"configure_section_btn\">\r\n            <button className=\"submit-btn\">Применить</button>\r\n          </div>\r\n        </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ConfigurePage","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from \"react\";\r\nimport \"./ConfigurePage\";\r\nconst Main = (props) => {\r\n  const { updateConfigure, pomodoro, pomoBreak } = props;\r\n  const [isPlay, setIsPlay] = useState(false);\r\n  const [isBreak, setIsBreak] = useState(false);\r\n  const [minutes, setMinutes] = useState();\r\n  const [seconds, setSeconds] = useState();\r\n  const [_interval, _setInterval] = useState(0);\r\n  const [_remainingTimeinMs, _setRemainingTimeinMs] = useState(0);\r\n  const configureTime = (_session, _break) => {\r\n    if (!isBreak) {\r\n      _session < 10 ? setMinutes(`0${_session}`) : setMinutes(pomodoro);\r\n      setSeconds(\"00\");\r\n    } else {\r\n      _break < 10 ? setMinutes(`0${_break}`) : setMinutes(_break);\r\n      setSeconds(\"00\");\r\n    }\r\n  };\r\n  /**\r\n   * Countdown function to count the time.\r\n   */\r\n  const countDownFunction = (_endTime) => {\r\n    let remainingTimeinMs = _endTime - Date.now();\r\n    _setRemainingTimeinMs(remainingTimeinMs);\r\n    let remainingTimeinS = Math.round(remainingTimeinMs / 1000);\r\n    //Двузначные минуты и секунды\r\n    let _tempMinute = Math.floor(remainingTimeinS / 60);\r\n    let _tempSeconds = Math.floor(remainingTimeinS % 60);\r\n    _tempMinute < 10 ? setMinutes(`0${_tempMinute}`) : setMinutes(_tempMinute);\r\n    _tempSeconds < 10\r\n      ? setSeconds(`0${_tempSeconds}`)\r\n      : setSeconds(_tempSeconds);\r\n  };\r\n  // Меняется кнопка проигрывать и пауза\r\n  const changePlayBtn = () => {\r\n    if (minutes === \"00\" && seconds === \"00\") return;\r\n    setIsPlay(!isPlay);\r\n    if (!isPlay) {\r\n      let totalTimeinMs = _remainingTimeinMs;\r\n      let _endTime = totalTimeinMs + Date.now();\r\n      _setInterval(\r\n        setInterval(() => {\r\n          countDownFunction(_endTime);\r\n        }, 100)\r\n      );\r\n    } else {\r\n      clearInterval(_interval);\r\n    }\r\n  };\r\n  //Перезапуск таймера\r\n  const restartFunction = () => {\r\n    configureTime(pomodoro, pomoBreak);\r\n    clearInterval(_interval);\r\n    setIsPlay(false);\r\n    setIsBreak(false);\r\n    _setRemainingTimeinMs(pomodoro * 60000);\r\n  };\r\n  const changeConfigure = () => {\r\n    restartFunction();\r\n    updateConfigure(true);\r\n  };\r\n  // Меняются настройки\r\n  useEffect(() => {\r\n    configureTime(pomodoro, pomoBreak);\r\n    if (!isBreak) {\r\n      _setRemainingTimeinMs(pomodoro * 60000);\r\n    } else {\r\n      _setRemainingTimeinMs(pomoBreak * 60000);\r\n    }\r\n  }, [pomodoro, pomoBreak, isBreak]);\r\n  useEffect(() => {\r\n    if (\r\n      minutes === \"00\" &&\r\n      seconds === \"00\" &&\r\n      _remainingTimeinMs < 1000 &&\r\n      _remainingTimeinMs !== 0\r\n    ) {\r\n      clearInterval(_interval);\r\n      setIsPlay(false);\r\n      setIsBreak(!isBreak);\r\n    }\r\n  }, [minutes, seconds]);\r\n  let changeStyle = () => {\r\n    const timer = document.getElementById(\"configure_section\");\r\n    console.log(timer);\r\n  };\r\n  return (\r\n    <div className=\"main__section\">\r\n      <div className=\"main__section--title\">\r\n        <div className=\"settings_info\" onClick={changeConfigure}>\r\n          <button className=\"settings_timer_btn\" onClick={changeStyle}>\r\n            <img\r\n              className=\"settings_timer_icon\"\r\n              src=\"https://img.icons8.com/?size=512&id=PUULuXvUfB6u&format=png\"\r\n              alt=\"Настройки\"\r\n            />\r\n          </button>\r\n        </div>\r\n          <h1 className=\"base_time_label\">\r\n            {minutes} : {seconds}\r\n          </h1>\r\n          <p className=\"base_time_name\">{isBreak ? \"Перерыв\" : \"Сессия\"}</p>\r\n        </div>\r\n      <div className=\"main__section--icons\">\r\n        <div className=\"btn-play-pause\" onClick={changePlayBtn}>\r\n          {isPlay ? (\r\n            <img\r\n              className=\"play_icon\"\r\n              src=\"https://img.icons8.com/?size=512&id=6JY5zZtJducA&format=png\"\r\n              alt=\"Начать\"\r\n            />\r\n          ) : (\r\n            <div className=\"pause_timer_img\">\r\n              <img\r\n                className=\"play_icon\"\r\n                src=\"https://img.icons8.com/?size=512&id=m2MbLIzl3AZD&format=png\"\r\n                alt=\"Стоп\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"btn-restart\" onClick={restartFunction}>\r\n          <img\r\n            className=\"restart_icon\"\r\n            src=\"https://img.icons8.com/?size=512&id=63815&format=png\"\r\n            alt=\"Сбросить\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React from 'react'\r\nimport Main from './Main.js'\r\nconst MainPage = (props) => {\r\n    const { updateConfigure, pomodoro, pomoBreak } = props;\r\n  return (\r\n    <div className='main_section'>\r\n        <Main\r\n        updateConfigure={updateConfigure}\r\n        pomodoro={pomodoro}\r\n        pomoBreak={pomoBreak}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MainPage","import React, { useEffect, useState } from \"react\";\r\nimport UsersList from \"./components/UsersList/UsersList\";\r\nimport UsersListClosed from \"./components/UsersList/UsersListClosed\";\r\nimport * as webRTCHandler from \"../connection/webRTC/webRTCHandler\";\r\nimport * as webRTCGroupHandler from \"../connection/webRTC/GroupCallHandler\";\r\nimport Call from \"./components/Call/Call\";\r\nimport { connect } from \"react-redux\";\r\nimport { LoginSignout } from \"./components/Calendar/LoginSignout\";\r\nimport CallInfo from \"./components/CallInfo/CallInfo\";\r\nimport { callStates } from \"../storage/actions/callActions\";\r\nimport GroupCallRoomsList from \"./components/GroupCallRoomsList/GroupCallRoomsList\";\r\nimport GroupCall from \"./components/GroupCall/GroupCall\";\r\nimport \"./Main.css\";\r\nimport DisplayTodo from \"./components/Todo/DisplayTodo\";\r\nimport {\r\n  collection,\r\n  query,\r\n  onSnapshot,\r\n  doc,\r\n  updateDoc,\r\n  deleteDoc,\r\n} from \"firebase/firestore\";\r\nimport { db } from \"./components/Todo/firebase\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\nimport AddTodo from \"./components/Todo/AddTodo\";\r\nimport VideoPlayer from \"./components/Video/VideoPlayer\";\r\nimport AudioPlayer from \"./components/Audio/AudioPlayer\";\r\nimport MainPagePomodoro from \"./components/Pomodoro/MainPage\";\r\nimport ConfigurePage from \"./components/Pomodoro/ConfigurePage\";\r\nimport Draggable from \"react-draggable\";\r\nconst MainPage = ({ username, callState }) => {\r\n  const [isConfigure, setIsConfigure] = useState(false);\r\n  const [name, setName] = useState(false);\r\n  const [pomodoro, setPomodoro] = useState(0);\r\n  const [pomoBreak, setPomoBreak] = useState(0);\r\n  const [todos, setTodos] = React.useState([]);\r\n  const history = useHistory();\r\n  const updateConfigure = (bool) => {\r\n    setIsConfigure(bool);\r\n  };\r\n  const updatePomodoro = (_pomodoro, _pomoBreak) => {\r\n    setPomodoro(_pomodoro);\r\n    setPomoBreak(_pomoBreak);\r\n  };\r\n  React.useEffect(() => {\r\n    const q = query(collection(db, \"todos\"));\r\n    const unsub = onSnapshot(q, (querySnapshot) => {\r\n      let todosArray = [];\r\n      querySnapshot.forEach((doc) => {\r\n        todosArray.push({ ...doc.data(), id: doc.id });\r\n      });\r\n      setTodos(todosArray);\r\n    });\r\n    return () => unsub();\r\n  }, []);\r\n  const handleEdit = async (todo, title) => {\r\n    await updateDoc(doc(db, \"todos\", todo.id), { title: title });\r\n  };\r\n  const toggleComplete = async (todo) => {\r\n    await updateDoc(doc(db, \"todos\", todo.id), { completed: !todo.completed });\r\n  };\r\n  const handleDelete = async (id) => {\r\n    await deleteDoc(doc(db, \"todos\", id));\r\n  };\r\n  //чтобы следить за изменениями\r\n  useEffect(() => {\r\n    setIsConfigure(isConfigure);\r\n  }, [isConfigure]);\r\n  useEffect(() => {\r\n    webRTCHandler.getLocalStream();\r\n    webRTCGroupHandler.connectWithMyPeer();\r\n  }, []);\r\n  useEffect(() => {\r\n    setName(window.sessionStorage.getItem('name'));\r\n  }, []);\r\n  const [showPomodoro, setShowPomodoro] = useState(true);\r\n  const [showNotes, setShowNotes] = useState(true);\r\n  const [showCalendar, setShowCalendar] = useState(true);\r\n  const [showAudio, setShowAudio] = useState(true);\r\n  const [showVideo, setShowVideo] = useState(true);\r\n  const [showMenu, setShowMenu] = useState(true);\r\n  const [showTodo, setShowTodo] = useState(true);\r\n  const [showCall, setShowCall] = useState(true);\r\n  const [showUsers, setShowUsers] = useState(true);\r\n  const [showUsersClosed, setShowUsersClosed] = useState(true);\r\n  function videoNature() {\r\n    var paths = [\"SnUBb-FAlCY\", \"UZ9uyQI3pF0\", \"nAYUhMzclfk\"];\r\n\r\n    var item = paths[Math.floor(Math.random() * paths.length)];\r\n\r\n    document.getElementById(\"video\").src =\r\n      \"https://youtube.com/embed/\" +\r\n      item +\r\n      \"?autoplay=1&controls=0&showinfo=0&autohide=1&loop=1&rel=0&vq=hd720&mute=1\";\r\n  }\r\n  function videoWalk() {\r\n    var paths = [\"LFOx-vmYrts\", \"sBtYWK817-0\", \"jxQX5XI766c\"];\r\n\r\n    var item = paths[Math.floor(Math.random() * paths.length)];\r\n\r\n    document.getElementById(\"video\").src =\r\n      \"https://youtube.com/embed/\" +\r\n      item +\r\n      \"?autoplay=1&controls=0&showinfo=0&autohide=1&loop=1&rel=0&vq=hd720&mute=1\";\r\n  }\r\n  function videoAnime() {\r\n    var paths = [\"OHORwLnHIEw\", \"Gdalp_QdWF8\", \"z9Ug-3qhrwY\"];\r\n\r\n    var item = paths[Math.floor(Math.random() * paths.length)];\r\n\r\n    document.getElementById(\"video\").src =\r\n      \"https://youtube.com/embed/\" +\r\n      item +\r\n      \"?autoplay=1&controls=0&showinfo=0&autohide=1&loop=1&rel=0&vq=hd720&mute=1\";\r\n  }\r\n  function videoPets() {\r\n    var paths = [\"4NrpprUAa2U\", \"KvE92fCMbmc\", \"uYJQIKAVBw8\"];\r\n\r\n    var item = paths[Math.floor(Math.random() * paths.length)];\r\n\r\n    document.getElementById(\"video\").src =\r\n      \"https://youtube.com/embed/\" +\r\n      item +\r\n      \"?autoplay=1&controls=0&showinfo=0&autohide=1&loop=1&rel=0&vq=hd720&mute=1\";\r\n  }\r\n  function videoAbstract() {\r\n    var paths = [\"dXHfQlcruU8\", \"j-9AjSqm6D4\", \"xDFWLudn5WY\"];\r\n\r\n    var item = paths[Math.floor(Math.random() * paths.length)];\r\n\r\n    document.getElementById(\"video\").src =\r\n      \"https://youtube.com/embed/\" +\r\n      item +\r\n      \"?autoplay=1&controls=0&showinfo=0&autohide=1&loop=1&rel=0&vq=hd720&mute=1\";\r\n  }\r\n  function videoCafe() {\r\n    var paths = [\"MYPVQccHhAQ\", \"3be40pMfSas\", \"bctWQxhOfG4\"];\r\n\r\n    var item = paths[Math.floor(Math.random() * paths.length)];\r\n\r\n    document.getElementById(\"video\").src =\r\n      \"https://youtube.com/embed/\" +\r\n      item +\r\n      \"?autoplay=1&controls=0&showinfo=0&autohide=1&loop=1&rel=0&vq=hd720&mute=1\";\r\n  }\r\n  function videoLofi() {\r\n    var paths = [\"AzV77KFsLn4\", \"_tV5LEBDs7w\", \"XWsptjpzBW0\"];\r\n\r\n    var item = paths[Math.floor(Math.random() * paths.length)];\r\n\r\n    document.getElementById(\"video\").src =\r\n      \"https://youtube.com/embed/\" +\r\n      item +\r\n      \"?autoplay=1&controls=0&showinfo=0&autohide=1&loop=1&rel=0&vq=hd720&mute=1\";\r\n  }\r\n  function videoLibrary() {\r\n    var paths = [\"YlnUCFUSyew\", \"WSqOXLK4_UU\", \"4vIQON2fDWM\"];\r\n\r\n    var item = paths[Math.floor(Math.random() * paths.length)];\r\n\r\n    document.getElementById(\"video\").src =\r\n      \"https://youtube.com/embed/\" +\r\n      item +\r\n      \"?autoplay=1&controls=0&showinfo=0&autohide=1&loop=1&rel=0&vq=hd720&mute=1\";\r\n  }\r\n  function openListUsers() {\r\n    document.getElementById(\"users_list_closed\").style.visibility = \"hidden\";\r\n    document.getElementById(\"users_list\").style.visibility = \"visible\";\r\n  }\r\n  function closeListUsers() {\r\n    document.getElementById(\"users_list_closed\").style.visibility = \"visible\";\r\n    document.getElementById(\"users_list\").style.visibility = \"hidden\";\r\n  }\r\n  function exitRoom() {\r\n  }\r\n  \r\n  return (\r\n    \r\n    <div className=\"main\">\r\n      \r\n      <iframe\r\n        title=\"video_bg\"\r\n        id=\"video\"\r\n        style={{\r\n          width: \"150%\",\r\n          height: \"150%\",\r\n          position: \"fixed\",\r\n          left: \"50%\",\r\n          top: \"30%\",\r\n          objectFit: \"cover\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          zIndex: \"-1\",\r\n        }}\r\n        src=\"https://youtube.com/embed/aiWhkBAt6sg?autoplay=1&mute=1&vq=hd720&controls=0&showinfo=0&rel=0\"\r\n      ></iframe>\r\n      <div className=\"header\">\r\n        <button\r\n          className=\"tools_menu_btn_header\"\r\n          onClick={() => {\r\n            setShowMenu(!showMenu);\r\n          }}\r\n        ></button>\r\n        <button\r\n          className=\"start_call\"\r\n          onClick={() => {\r\n            setShowCall(!showCall);\r\n            // try {\r\n            //   if (\r\n            //     document.getElementById(\"call\").style.visibility === \"visible\"\r\n            //   ) {\r\n            //     document.getElementById(\"call\").style.visibility = \"hidden\";\r\n            //   } else if (\r\n            //     document.getElementById(\"call\").style.visibility === \"hidden\"\r\n            //   ) {\r\n            //     document.getElementById(\"call\").style.visibility = \"visible\";\r\n            //   }\r\n            // } catch {\r\n            //   console.log(\"null\");\r\n            // }\r\n          }}\r\n        >\r\n          <span className=\"create_call_title\">Начать звонок</span>\r\n        </button>\r\n        <button className=\"sign_google_btn\" onClick={exitRoom()}>\r\n          <Link to=\"/\" className=\"enter_google_title\">Выход</Link>\r\n          <img\r\n            className=\"google_icon\"\r\n            src=\"https://img.icons8.com/?size=512&id=q4ZIbaRJl8l0&format=png\"\r\n            alt=\"Выход\"\r\n          ></img>\r\n        </button>\r\n      </div>\r\n      <div className=\"main_container\">\r\n        {showMenu && (\r\n          <div className=\"main_instrumental_container\">\r\n            <div className=\"space_buttons_container\">\r\n              <button\r\n                title=\"Природа\"\r\n                className=\"nature_btn_space\"\r\n                onClick={videoNature}\r\n              ></button>\r\n              <button\r\n                title=\"Аниме\"\r\n                className=\"anime_btn_space\"\r\n                onClick={videoAnime}\r\n              ></button>\r\n              <button\r\n                title=\"Животные\"\r\n                className=\"pets_btn_space\"\r\n                onClick={videoPets}\r\n              ></button>\r\n              <button\r\n                title=\"Абстракция\"\r\n                className=\"abstract_btn_space\"\r\n                onClick={videoAbstract}\r\n              ></button>\r\n              <button\r\n                title=\"Кафе\"\r\n                className=\"coffee_btn_space\"\r\n                onClick={videoCafe}\r\n              ></button>\r\n              <button\r\n                title=\"Lo-fi\"\r\n                className=\"lofi_btn_space\"\r\n                onClick={videoLofi}\r\n              ></button>\r\n              <button\r\n                title=\"Библиотека\"\r\n                className=\"library_btn_space\"\r\n                onClick={videoLibrary}\r\n              ></button>\r\n              <button\r\n                title=\"Прогулка\"\r\n                className=\"walk_btn_space\"\r\n                onClick={videoWalk}\r\n              ></button>\r\n            </div>\r\n            <div className=\"instrument_buttons_container\">\r\n              <button\r\n                className=\"calendar_btn\"\r\n                id=\"calendar_btn\"\r\n                onClick={() => {\r\n                  setShowCalendar(!showCalendar);\r\n                  // try {\r\n                  //   if (\r\n                  //     document.getElementById(\"calendar\").style.visibility ===\r\n                  //     \"visible\"\r\n                  //   ) {\r\n                  //     document.getElementById(\"calendar\").style.visibility =\r\n                  //       \"hidden\";\r\n                  //   } else if (\r\n                  //     document.getElementById(\"calendar\").style.visibility ===\r\n                  //     \"hidden\"\r\n                  //   ) {\r\n                  //     document.getElementById(\"calendar\").style.visibility =\r\n                  //       \"visible\";\r\n                  //   }\r\n                  // } catch {\r\n                  //   console.log(\"null\");\r\n                  // }\r\n                }}\r\n              >\r\n                <img style={{left: '5.7%'}}\r\n                  className=\"instrument_icon\"\r\n                  src=\"https://em-content.zobj.net/thumbs/120/apple/354/spiral-calendar_1f5d3-fe0f.png\"\r\n                  alt=\"Календарь\"\r\n                />\r\n                <img\r\n                  className=\"arrow_icon\"\r\n                  src=\"https://img.icons8.com/?size=512&id=39808&format=png\"\r\n                  alt=\"Перейти\"\r\n                />\r\n                <span className=\"instrument_title\" style={{left: '6.4%'}}>Календарь</span>\r\n              </button>\r\n              <button\r\n                className=\"timer_btn\"\r\n                onClick={() => {\r\n                  setShowPomodoro(!showPomodoro);\r\n                  // try {\r\n                  //   if (\r\n                  //     document.getElementById(\"timer\").style.visibility ===\r\n                  //     \"visible\"\r\n                  //   ) {\r\n                  //     document.getElementById(\"timer\").style.visibility =\r\n                  //       \"hidden\";\r\n                  //   } else if (\r\n                  //     document.getElementById(\"timer\").style.visibility ===\r\n                  //     \"hidden\"\r\n                  //   ) {\r\n                  //     document.getElementById(\"timer\").style.visibility =\r\n                  //       \"visible\";\r\n                  //   }\r\n                  // } catch {\r\n                  //   console.log(\"null\");\r\n                  // }\r\n                }}\r\n              >\r\n                <img style={{left: '15.3%'}}\r\n                  className=\"instrument_icon\"\r\n                  src=\"https://em-content.zobj.net/thumbs/120/apple/354/hourglass-not-done_23f3.png\"\r\n                  alt=\"Таймер\"\r\n                />\r\n                <img\r\n                  className=\"arrow_icon\"\r\n                  src=\"https://img.icons8.com/?size=512&id=39808&format=png\"\r\n                  alt=\"Перейти\"\r\n                />\r\n                <span className=\"instrument_title\" style={{left: '16.5%'}}>Таймер</span>\r\n              </button>\r\n              <button\r\n                className=\"notes_btn\"\r\n                onClick={() => {\r\n                  setShowNotes(!showNotes);\r\n                  // try {\r\n                  //   if (\r\n                  //     document.getElementById(\"notes\").style.visibility ===\r\n                  //     \"visible\"\r\n                  //   ) {\r\n                  //     document.getElementById(\"notes\").style.visibility =\r\n                  //       \"hidden\";\r\n                  //   } else if (\r\n                  //     document.getElementById(\"notes\").style.visibility ===\r\n                  //     \"hidden\"\r\n                  //   ) {\r\n                  //     document.getElementById(\"notes\").style.visibility =\r\n                  //       \"visible\";\r\n                  //   }\r\n                  // } catch {\r\n                  //   console.log(\"null\");\r\n                  // }\r\n                }}\r\n              >\r\n                <img\r\n                  className=\"instrument_icon_2\"\r\n                  style={{left: '6%'}}\r\n                  src=\"https://em-content.zobj.net/thumbs/120/apple/354/pencil_270f-fe0f.png\"\r\n                  alt=\"Заметки\"\r\n                />\r\n                <img\r\n                  className=\"arrow_icon\"\r\n                  src=\"https://img.icons8.com/?size=512&id=39808&format=png\"\r\n                  alt=\"Перейти\"\r\n                />\r\n                <span className=\"instrument_title_2\" style={{left: '7%'}}>Заметки</span>\r\n              </button>\r\n              <button\r\n                className=\"todo_btn\"\r\n                onClick={() => {\r\n                  setShowTodo(!showTodo);\r\n                  // try {\r\n                  //   if (\r\n                  //     document.getElementById(\"todo\").style.visibility ===\r\n                  //     \"visible\"\r\n                  //   ) {\r\n                  //     document.getElementById(\"todo\").style.visibility =\r\n                  //       \"hidden\";\r\n                  //   } else if (\r\n                  //     document.getElementById(\"todo\").style.visibility ===\r\n                  //     \"hidden\"\r\n                  //   ) {\r\n                  //     document.getElementById(\"todo\").style.visibility =\r\n                  //       \"visible\";\r\n                  //   }\r\n                  // } catch {\r\n                  //   console.log(\"null\");\r\n                  // }\r\n                }}\r\n              >\r\n                <img style={{left: '15.5%'}}\r\n                  className=\"instrument_icon_2\"\r\n                  src=\"https://em-content.zobj.net/thumbs/120/apple/354/briefcase_1f4bc.png\"\r\n                  alt=\"Список дел\"\r\n                />\r\n                <img\r\n                  className=\"arrow_icon\"\r\n                  src=\"https://img.icons8.com/?size=512&id=39808&format=png\"\r\n                  alt=\"Перейти\"\r\n                />\r\n                <span className=\"instrument_title_2\">Дела</span>\r\n              </button>\r\n              <button\r\n                className=\"video_btn\"\r\n                onClick={() => {\r\n                  setShowVideo(!showVideo);\r\n                  // try {\r\n                  //   if (\r\n                  //     document.getElementById(\"video\").style.visibility ===\r\n                  //     \"visible\"\r\n                  //   ) {\r\n                  //     document.getElementById(\"video\").style.visibility =\r\n                  //       \"hidden\";\r\n                  //   } else if (\r\n                  //     document.getElementById(\"video\").style.visibility ===\r\n                  //     \"hidden\"\r\n                  //   ) {\r\n                  //     document.getElementById(\"video\").style.visibility =\r\n                  //       \"visible\";\r\n                  //   }\r\n                  // } catch {\r\n                  //   console.log(\"null\");\r\n                  // }\r\n                }}\r\n              >\r\n                <img\r\n                style={{left: '6%'}}\r\n                  className=\"instrument_icon_3\"\r\n                  src=\"https://em-content.zobj.net/thumbs/120/apple/354/film-frames_1f39e-fe0f.png\"\r\n                  alt=\"Видео\"\r\n                />\r\n                <img\r\n                  className=\"arrow_icon\"\r\n                  src=\"https://img.icons8.com/?size=512&id=39808&format=png\"\r\n                  alt=\"Перейти\"\r\n                />\r\n                <span className=\"instrument_title_3\" style={{left: '7.5%'}}>Видео</span>\r\n              </button>\r\n              <button\r\n                className=\"sound_btn\"\r\n                onClick={() => {\r\n                  setShowAudio(!showAudio);\r\n                  // try {\r\n                  //   if (\r\n                  //     document.getElementById(\"audio\").style.visibility ===\r\n                  //     \"visible\"\r\n                  //   ) {\r\n                  //     document.getElementById(\"audio\").style.visibility =\r\n                  //       \"hidden\";\r\n                  //   } else if (\r\n                  //     document.getElementById(\"audio\").style.visibility ===\r\n                  //     \"hidden\"\r\n                  //   ) {\r\n                  //     document.getElementById(\"audio\").style.visibility =\r\n                  //       \"visible\";\r\n                  //   }\r\n                  // } catch {\r\n                  //   console.log(\"null\");\r\n                  // }\r\n                }}\r\n              >\r\n                <img style={{left: '15.5%'}}\r\n                  className=\"instrument_icon_3\"\r\n                  src=\"https://em-content.zobj.net/thumbs/120/apple/354/headphone_1f3a7.png\"\r\n                  alt=\"Звуки\"\r\n                />\r\n                <img\r\n                  className=\"arrow_icon\"\r\n                  src=\"https://img.icons8.com/?size=512&id=39808&format=png\"\r\n                  alt=\"Перейти\"\r\n                />\r\n                <span className=\"instrument_title_3\" style={{left: '17%'}}>Звуки</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {!showPomodoro && (\r\n          <Draggable>\r\n            <div className=\"timer_space\" id=\"timer\">\r\n              <MainPagePomodoro\r\n                updateConfigure={updateConfigure}\r\n                pomodoro={pomodoro}\r\n                pomoBreak={pomoBreak}\r\n              />\r\n              {isConfigure && (\r\n                <ConfigurePage\r\n                  updateConfigure={updateConfigure}\r\n                  updatePomodoro={updatePomodoro}\r\n                />\r\n              )}\r\n            </div>\r\n          </Draggable>\r\n        )}\r\n        {!showNotes && (\r\n          <Draggable>\r\n            <div className=\"notes_space\">\r\n              <img\r\n                className=\"notes_icon\"\r\n                src=\"https://img.icons8.com/?size=512&id=Vk1hVre0P58T&format=png\"\r\n                alt=\"Календарь\"\r\n              />\r\n              <span className=\"notes_instrument_title\">Заметки</span>\r\n              <textarea className=\"notes_text\"></textarea>\r\n            </div>\r\n          </Draggable>\r\n        )}\r\n        {!showTodo && (\r\n          <Draggable>\r\n            <div className=\"todo_space\" id=\"todo\">\r\n              <div className=\"todo_container\">\r\n                {todos.map((todo) => (\r\n                  <DisplayTodo\r\n                    key={todo.id}\r\n                    todo={todo}\r\n                    toggleComplete={toggleComplete}\r\n                    handleDelete={handleDelete}\r\n                    handleEdit={handleEdit}\r\n                  />\r\n                ))}\r\n              </div>\r\n              <AddTodo />\r\n            </div>\r\n          </Draggable>\r\n        )}\r\n        {!showCall && (\r\n          <Draggable>\r\n            <div className=\"create_call_container\">\r\n              <div className=\"dashboard_content_container\" id=\"call\">\r\n                <Call />\r\n                {callState !== callStates.CALL_IN_PROGRESS && (\r\n                  <CallInfo username={name} />\r\n                )}\r\n                <GroupCall />\r\n                \r\n                \r\n              </div>\r\n\r\n              <div className=\"dashboard_rooms_container\">\r\n                <GroupCallRoomsList />\r\n              </div>\r\n            </div>\r\n          </Draggable>\r\n        )}\r\n\r\n        {!showCalendar && (\r\n          <Draggable>\r\n            <div className=\"calendar_space\">\r\n              <LoginSignout />\r\n            </div>\r\n          </Draggable>\r\n        )}\r\n        {!showAudio && (\r\n          <Draggable>\r\n            <div className=\"audio_space\">\r\n              <AudioPlayer />\r\n            </div>\r\n          </Draggable>\r\n        )}\r\n        {!showVideo && (\r\n          <Draggable>\r\n            <div className=\"video_space\">\r\n              <VideoPlayer />\r\n            </div>\r\n          </Draggable>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"mainpage_users_list_closed\" id=\"users_list_closed\">\r\n        <button\r\n          className=\"open_users_list\"\r\n          onClick={() => {\r\n            openListUsers();\r\n          }}\r\n        />\r\n        <UsersListClosed />\r\n      </div>\r\n      <div className=\"users_list\" id=\"users_list\">\r\n        <div className=\"header_users_list\" style={{ height: \"10%\" }}>\r\n          <button\r\n            className=\"close_users_list\"\r\n            onClick={() => {\r\n              closeListUsers();\r\n            }}\r\n          ></button>\r\n          <div\r\n            className=\"label_users\"\r\n          >\r\n            <label style={{ position: \"fixed\" }}>Участники</label>\r\n          </div>\r\n        </div>\r\n\r\n        <UsersList />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ call, dashboard }) => ({\r\n  ...call,\r\n  ...dashboard,\r\n});\r\n\r\nexport default connect(mapStateToProps)(MainPage);\r\n","import React, {useEffect} from 'react';\r\n\r\nconst UsernameInput = (props) => {\r\n  const { username, setUsername, roomNum, setRoomNum } = props;\r\n  \r\n  useEffect(() => {\r\n    window.sessionStorage.setItem('name', username);\r\n  }, [username]);\r\n  return (\r\n    <div>\r\n    <div className='start_page_input_container'>\r\n      <input\r\n      id='input_username'\r\n        placeholder='Введи своё имя'\r\n        type='text'\r\n        maxLength='15'\r\n        value={username}\r\n        onChange={(event) => { setUsername(event.target.value); }}\r\n        className='start_page_login_input'\r\n      />\r\n    </div>\r\n    <div className='start_page_input_container'>\r\n    <input\r\n    id='input_num'\r\n      placeholder='Введи название комнаты'\r\n      type='text'\r\n      maxLength='15'\r\n      value={roomNum}\r\n      onChange={(event) => { setRoomNum(event.target.value); }}\r\n      className='start_page_room_input'\r\n    />\r\n  </div>\r\n  </div>\r\n  );\r\n};\r\n\r\nexport default UsernameInput;\r\n","import React from 'react';\r\n\r\nconst SubmitButton = ({ handleSubmitButtonPressed }) => {\r\n  return (\r\n    <div className='start_page_button_container'>\r\n      <button\r\n        className='start_page_button'\r\n        onClick={handleSubmitButtonPressed}\r\n      >\r\n      Войти\r\n      </button>\r\n    </div>\r\n\r\n  );\r\n};\r\n\r\nexport default SubmitButton;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport StartPageInput from \"./components/StartPageInput\";\r\nimport SubmitButton from \"./components/SubmitButton\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Carousel from \"react-bootstrap/Carousel\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {\r\n  registerNewUser,\r\n  registerNewRoomNum,\r\n} from \"../connection/socketConnection/socketConnection\";\r\nimport { setUsername } from \"../storage/actions/mainPageActions\";\r\nimport { collection, addDoc, query, where, getDocs } from \"firebase/firestore\";\r\nimport { db } from \"../mainPage/components/Todo/firebase\";\r\nimport \"./StartPage.css\";\r\n\r\nconst LoginPage = ({ saveUsername }) => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [roomNum, setRoomNum] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  const handleSubmitButtonPressed = async (e) => {\r\n    e.preventDefault();\r\n    checkValue();\r\n    if (checkValue() === true) {\r\n      registerNewUser(username, roomNum);\r\n      saveUsername(username);\r\n      try {\r\n        const docRef = await addDoc(collection(db, \"Rooms\"), {\r\n          room: document.getElementById(\"input_num\").value,\r\n          username: document.getElementById(\"input_username\").value,\r\n        });\r\n        console.log(\"Document written with ID: \", docRef.id);\r\n      } catch (e) {\r\n        console.error(\"Error adding document: \", e);\r\n      }\r\n      history.push(`/room/${roomNum}`);\r\n    }\r\n  };\r\n  // const firebase = (users) => {\r\n  //   const usersRef = collection(db, \"Rooms\");\r\n  //   const q = query(\r\n  //     usersRef,\r\n  //     where(\"username\", \"==\", username),\r\n  //     where(\"room\", \"==\", room)\r\n  //   );\r\n  //   return getDocs(q).then((qSnap) => {\r\n  //     const data = qSnap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n  //     if (data.length > 0) {\r\n  //       console.log(data);\r\n  //     } else {\r\n  //       console.log(\"фу\");\r\n  //     }\r\n\r\n  //     return data;\r\n  //   });\r\n  // };\r\n \r\n  function enter_btn(){\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n      let btn = document.getElementById('register_btn');\r\n      btn.addEventListener('click', () => {\r\n          document.getElementById('carousel').style.visibility = 'hidden';\r\n          document.getElementById('welcome_text').style.visibility = 'hidden';\r\n          document.getElementById('faq_docs_container').style.visibility = 'hidden';\r\n          document.getElementById('start_page_register').style.visibility = 'visible';\r\n      });\r\n  });\r\n  }  \r\n  function faq_btn(){\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n      let btn = document.getElementById('faq_btn');\r\n      btn.addEventListener('click', () => {\r\n          document.getElementById('carousel').style.visibility = 'hidden';\r\n          document.getElementById('welcome_text').style.visibility = 'hidden';\r\n          document.getElementById('start_page_register').style.visibility = 'hidden';\r\n          document.getElementById('faq_docs_container').style.visibility = 'visible';\r\n      });\r\n  });\r\n  }  \r\n  function title_btn(){\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n      let btn = document.getElementById('utopia_logo_title');\r\n      btn.addEventListener('click', () => {\r\n          document.getElementById('carousel').style.visibility = 'visible';\r\n          document.getElementById('welcome_text').style.visibility = 'visible';\r\n          document.getElementById('faq_docs_container').style.visibility = 'hidden';\r\n          document.getElementById('start_page_register').style.visibility = 'hidden';\r\n      });\r\n  });\r\n  }  \r\n  \r\n  function checkValue() {\r\n    var a = document.getElementById(\"input_username\").value;\r\n    var b = document.getElementById(\"input_num\").value;\r\n    if (a == null || a === \"\" || b == null || b === \"\") {\r\n      alert(\"Заполните все поля\");\r\n      return false;\r\n    } else return true;\r\n  }\r\n\r\n  return (\r\n    <div className=\"start_page_container\">\r\n       <header className=\"header_start_page\">\r\n        <h4 className=\"utopia_logo_title\" id=\"utopia_logo_title\" onClick={title_btn()}>Утопия</h4>\r\n        <button className=\"faq_button\" id=\"faq_btn\" onClick={faq_btn()}>А как пользоваться?</button>\r\n        <button className=\"register_btn_to_div\" id=\"register_btn\" onClick={enter_btn()}>Войти</button>\r\n      </header> \r\n     <main>\r\n      <div className=\"welcome_text\" id=\"welcome_text\">\r\n        <h1 className=\"welcome_title\">\r\n          Приветствую в <span className=\"utopia_welcome_text\">Утопии</span>\r\n        </h1>\r\n        <p className=\"greeting_welcome\">\r\n          Место, где ты создаёшь пространство, которое подходит именно тебе\r\n        </p>\r\n        </div>\r\n          <Carousel id=\"carousel\" className=\"carousel_info\" interval={6000} slide={false}>\r\n      <Carousel.Item>\r\n      <img className=\"greeting_image\" src='https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/Погулять%20с%20собакой.png?alt=media&token=386935e7-7a99-41de-97cf-93925d273d4e&_gl=1*h6yhah*_ga*NTkxNDUyNTI2LjE2ODUwMDI3MjA.*_ga_CW55HF8NVT*MTY4NTcyNzgyMi44LjEuMTY4NTcyNzg3MC4wLjAuMA..' alt=\"Функционал без приложения\"></img>\r\n          <h1 className=\"works_title\">Как работает и для чего это вообще?</h1>\r\n        \r\n      </Carousel.Item>\r\n      <Carousel.Item>\r\n      <div className=\"spaces_works_container\">\r\n          <h1 className=\"spaces_works_title\">Персональные пространства</h1>\r\n          <img className=\"spaces_image_works\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/коллаж%20с%20пространствами.png?alt=media&token=0e0e08e0-5c69-4ec7-b584-0d48cad91154&_gl=1*9efeqe*_ga*NTkxNDUyNTI2LjE2ODUwMDI3MjA.*_ga_CW55HF8NVT*MTY4NTcyNzgyMi44LjEuMTY4NTcyOTUzMy4wLjAuMA..\" alt=\"Пространства\"></img>\r\n          <p className=\"spaces_works_text\">Благодаря коллекции пространств, ты можешь погрузиться <br/> в нужную атмосферу и лучше сосредоточиться на делах</p>\r\n          </div>\r\n      </Carousel.Item>\r\n      <Carousel.Item>\r\n      <div className=\"calendar_works_container\">\r\n          <img className=\"calendar_image_works\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/календарик.png?alt=media&token=371a283e-94c8-4e14-9e92-2313ed8d732f&_gl=1*rqnejz*_ga*NTkxNDUyNTI2LjE2ODUwMDI3MjA.*_ga_CW55HF8NVT*MTY4NTcyNzgyMi44LjEuMTY4NTczMDYwMi4wLjAuMA..\" alt=\"Календарь\"></img>\r\n            <h1 className=\"calendar_works_title\">Быстрый доступ к календарю</h1>\r\n            <p className=\"calendar_works_text\">Подключи свой Google-аккаунт и управляй своими делами,<br/> не бегая по вкладкам</p>\r\n          </div>\r\n      </Carousel.Item>\r\n      <Carousel.Item>\r\n      <div className=\"call_works_container\">\r\n          <img className=\"call_image_works\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/разговор.png?alt=media&token=c700f978-9634-45c6-a7b9-e5bbb3e19462&_gl=1*1jzdv07*_ga*NTkxNDUyNTI2LjE2ODUwMDI3MjA.*_ga_CW55HF8NVT*MTY4NTcyNzgyMi44LjEuMTY4NTczMDkzOC4wLjAuMA..\" alt=\"Звонки\"></img>\r\n            <h1 className=\"call_works_title\">Звони, пиши, общайся!</h1>\r\n            <p className=\"call_works_text\">Ты можешь подключить своих друзей и делать домашку вместе<br/> или созвониться с коллегами и обсудить важные вопросы</p>\r\n          </div>\r\n      </Carousel.Item>\r\n    </Carousel>\r\n        </main>\r\n        <div className=\"start_page_elements\" id=\"start_page_register\">\r\n        <div className=\"start_page_logo_container\">\r\n          <img className=\"start_page_logo_image\" src=\"https://media.giphy.com/media/w1pwl0F67JHGFLseNk/giphy.gif\" alt=\"utopia\" />\r\n        </div>\r\n        <div className=\"start_page_title_container\">\r\n          <h2>Войти</h2>\r\n        </div>\r\n        <StartPageInput username={username} room={roomNum} setUsername={setUsername} setRoomNum={setRoomNum} />\r\n        \r\n        <SubmitButton handleSubmitButtonPressed={handleSubmitButtonPressed} />\r\n        </div>\r\n        <div className=\"faq_docs_container\" id=\"faq_docs_container\">\r\n          <div className=\"faq_instruments\">\r\n          <h1 className=\"title_faq\">Меню инструментов</h1>\r\n          <p className=\"text_faq\" style={{textAlign: 'left'}}>Для того, чтобы получить доступ к инструментам, есть специальная панель</p>\r\n          <img className=\"faq_instruments_img\" alt=\"меню инструментов\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/toolbar.jpg?alt=media&token=e3c5a9ea-8264-4196-9206-d748a5304b4d\"></img>\r\n          <p className=\"text_faq\" style={{textAlign: 'left'}}>Её можно скрыть нажав на иконку сверху</p>\r\n          </div>\r\n          <h1 className=\"title_faq\">Как закрыть инструмент?</h1>\r\n          <p className=\"text_faq\" style={{textAlign: 'left'}}>Чтобы закрыть инструмент, необходимо нажать на иконку инструмента ещё раз и он исчезнет</p>\r\n          <img className=\"faq_close_img\" alt=\"закрыть инструмент\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/close_widget.jpg?alt=media&token=8c56f7a2-b2b2-475f-aee9-08f4051503b8&_gl=1*4ozmg*_ga*NTkxNDUyNTI2LjE2ODUwMDI3MjA.*_ga_CW55HF8NVT*MTY4NTkxMjQ2My4xMy4xLjE2ODU5MTI0NjkuMC4wLjA.\"></img>\r\n          <h1 className=\"title_faq\">Управляй своим пространством</h1>\r\n          <p className=\"text_faq\" style={{textAlign: 'left'}}>Нажми на иконку смайликов и фон будет меняться автоматически.</p>\r\n          <p className=\"text_faq\" style={{textAlign: 'left'}}>Жмякай, пока не найдешь тот, который тебе идеально подходит</p>\r\n          <img className=\"faq_space_img\" alt=\"выбрать фон\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/choose_space.jpg?alt=media&token=dd98276d-133f-4d49-995c-78ff87a742e3&_gl=1*m9l1dv*_ga*NTkxNDUyNTI2LjE2ODUwMDI3MjA.*_ga_CW55HF8NVT*MTY4NTkxMjQ2My4xMy4xLjE2ODU5MTMxMjcuMC4wLjA.\"></img>\r\n          <h1 className=\"title_faq\">Созванивайся с друзьями</h1>\r\n          <p className=\"text_faq\" style={{textAlign: 'left'}}>Чтобы создать звонок нажми на кнопку в верхнем углу и откроется панель всех возможностей звонка</p>\r\n          <img className=\"faq_create_call_img\" alt=\"создать звонок\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/create_call.jpg?alt=media&token=b1bf47d3-7670-47e3-bdbc-6442f78bf362&_gl=1*8rwmol*_ga*NTkxNDUyNTI2LjE2ODUwMDI3MjA.*_ga_CW55HF8NVT*MTY4NTkxMjQ2My4xMy4xLjE2ODU5MTM2NDguMC4wLjA.\"></img>\r\n          <h1 className=\"title_faq\">Как позвонить?</h1>\r\n          <p className=\"text_faq\" style={{textAlign: 'left'}}>Для того, чтобы связаться с участником комнаты, нужно нажать на него и ему поступит звонок</p>\r\n          <img className=\"faq_create_call_img\" alt=\"создать звонок\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/to_call.jpg?alt=media&token=55041718-258f-4a6f-91e7-06df1dc2cf32&_gl=1*1364wd7*_ga*NTkxNDUyNTI2LjE2ODUwMDI3MjA.*_ga_CW55HF8NVT*MTY4NTk1MTI0MC4xNC4xLjE2ODU5NTM1ODEuMC4wLjA.\"></img>\r\n          <h1 className=\"title_faq\">Создавай групповые комнаты</h1>\r\n          <p className=\"text_faq\" style={{textAlign: 'left'}}>Жми на кнопку \"Создать комнату\" и она отобразиться в списке доступных всем участникам.</p>\r\n          <p className=\"text_faq\" style={{textAlign: 'left'}}>Чтобы присоединиться к существующей, необходимо нажать на название желаемой комнаты и бум! Ты подключился!</p>\r\n          <img className=\"faq_group_call_img\" alt=\"создать комнату\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/create_call_room.jpg?alt=media&token=8050161e-8361-4bd6-afbd-878426a06cf9&_gl=1*15zwj9p*_ga*NTkxNDUyNTI2LjE2ODUwMDI3MjA.*_ga_CW55HF8NVT*MTY4NTkxMjQ2My4xMy4xLjE2ODU5MTM2MTIuMC4wLjA.\"></img>\r\n          <h1 className=\"title_faq\">Хочешь вернуться на главную страницу и покинуть комнату?</h1>\r\n          <p className=\"text_faq\" style={{textAlign: 'left'}}>Нажми на кнопку \"Выход\" и страница обновится.</p>\r\n          <img className=\"faq_exit_img\" alt=\"закрыть инструмент\" src=\"https://firebasestorage.googleapis.com/v0/b/utopia-386509.appspot.com/o/leave_room.jpg?alt=media&token=05d777a5-afbd-44b0-b5c5-387639f0daea&_gl=1*9nq8q6*_ga*NTkxNDUyNTI2LjE2ODUwMDI3MjA.*_ga_CW55HF8NVT*MTY4NTkxMjQ2My4xMy4xLjE2ODU5MTM2OTUuMC4wLjA.\"></img>\r\n          <h2 className=\"text_faq_end\" style={{textAlign: 'center'}}>Вот и всё! Приятного пользования!\r\n          <img className=\"faq_bye_image\" src=\"https://media.giphy.com/media/lonWFYfXEhH9dGnyX0/giphy.gif\" alt=\"пока-пока\"></img></h2>        \r\n        </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    saveUsername: (username) => dispatch(setUsername(username)),\r\n  };\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(LoginPage);\r\n","import {BrowserRouter as Router,\r\nSwitch,\r\nRoute\r\n} from 'react-router-dom';\r\nimport {useEffect} from 'react';\r\nimport {connectWithWebSocket} from './connection/socketConnection/socketConnection';\r\nimport MainPage from './mainPage/Main';\r\nimport StartPage from './startPage/StartPage';\r\n\r\nfunction App() {\r\n  useEffect(() => {\r\n    connectWithWebSocket();\r\n  },[]);\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route exact path='/room/:id'>\r\n          <MainPage/>\r\n        </Route>\r\n        <Route path='/'>\r\n          <StartPage/>\r\n        </Route>\r\n        \r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport storage from './storage/storage';\r\nimport App from './App';\r\nimport \"./index.css\"\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={storage}>\r\n      <App />\r\n      </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}